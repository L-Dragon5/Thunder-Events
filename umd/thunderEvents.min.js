!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ThunderEvents=t()}(this,(function(){"use strict";const e={title:"Venue",imageSrc:"",clickableAreas:[]},t={events:[],floorPlan:e},n="FAVORITE_EVENTS",o=async e=>{const t=JSON.parse(localStorage.getItem(n)||"[]");t.push(e);const o=JSON.stringify(t);return localStorage.setItem(n,o),t},a=async()=>JSON.parse(localStorage.getItem(n)||"[]"),r=()=>Promise.resolve({guide:t,addFavorite:o,getFavorites:a}),i=Date.now(),l={start:i,end:i+36e5,location:"(not provided)",name:"(no name)",host:"(not provided)",category:"(not provided)",description:"(no description)"},s={shape:"rect",coords:[],href:"#",alt:""},c={days:[],interval:60},d="50em",p=()=>{},g=e=>null===e?"null":"object"==typeof e?e.constructor.name.toLowerCase():typeof e,h=(e,t)=>{const n="string"===g(t),o="array"===g(t)&&t.every((e=>"string"===g(e)));if(!n&&!o)throw"`checkType()` expects either a string or array of strings in the second argument";return n?g(e)===t:o?t.some((t=>g(e)===t)):void 0},u=e=>h(e,"object"),m=(e,t=p,n={})=>{if(!u(e))throw"`useFallback()` expects an object in the first argument";if(!h(t,"function"))throw"`useFallback()` expects a function in the second argument";if(!u(n))throw"`useFallback()` expects an object in the third argument";return(o,a)=>{const r=e[a],i=u(o),l=i?o[a]:null,s=h(l,["undefined","null"]);const c=g(l),d=n[a],p=h(d,"array")?d:h(d,"string")?[d]:[],m=c!==g(r)&&!p.some((e=>e===c));if(!i||s||m){return t(i?s?"empty":"mismatch":"invalid",a),r}return l}},v=(e,t="object",n={})=>{if(!u(e))throw"You may only cast to custom object types";return o=>{if(!u(o))return e;const a=m(e,((n,a)=>{"invalid"===n?console.warn(`The provided ${t} is not a valid object.`):"mismatch"===n?console.warn(`The \`${a}\` field expected type \`${g(e[a])}\` but got \`${g(o[a])}\`.`):"empty"===n&&console.warn(`The provided ${t} did not have the \`${a}\` field.`)}),n);return Object.keys(e).reduce(((e,t)=>(e[t]=a(o,t),e)),{})}},f=(e={})=>{if("after"in e&&!h(e.after,["number","date"]))throw"The `after` field expects a number or date";if("before"in e&&!h(e.before,["number","date"]))throw"The `before` field expects a number or date";if("locations"in e&&!h(e.locations,"array"))throw"The `locations` field expects an array";if("search"in e&&!h(e.search,["string","regexp"]))throw"The `search` field expects a string or regular expression";return!0},b=e=>{let t=e.childNodes.length;for(;t--;)e.removeChild(e.lastChild)},w=e=>{const t=document.createRange();return t.selectNode(document.body),t.createContextualFragment(e)},y=(e,t)=>e.map(t).join(""),k=(e,t=15)=>{const n=new Date(e),o=Math.round(n.getMinutes()/t)*t;return n.setMinutes(o),n},$=e=>Number(e.toFixed()),S=(e,t=!1)=>t?["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"][e]:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e],x=e=>{const t=new Date(e);return{time:t.toLocaleTimeString("en-US",{timeStyle:"short"}),day:S(t.getDay()),date:t.toLocaleDateString()}},D=(e,...t)=>`this.getRootNode().host.${e}(${t.length?`\n  ${[...t].map((e=>"object"===g(e)?`\`${encodeURIComponent(JSON.stringify(e))}\``:"string"===g(e)?`\`${e}\``:String(e)))}\n`:"event"})`,_=({location:e,name:t,start:n})=>{const o=e=>e.replace(/[^a-zA-Z0-9]/g,""),a=new Date(n),r=`${a.toLocaleDateString()}-${a.toLocaleTimeString()}`;return`${o(e)}-${o(t)}-${o(r)}`},E=(e,t)=>{const n=e=>e?.normalize("NFD").replace(/\p{Diacritic}/gu,"").replace(/[^a-zA-Z0-9]/g,"").toLowerCase(),o=n(e),a=n(t);return-1!==a.search(o)||(-1!==o.search(a)||e.split(/\s+/g).some((e=>-1!==a.search(n(e)))))},T=e=>e.length>40?e.slice(0,36)+"...":e,F={_hasFetched:!1,get hasFetched(){return this._hasFetched},set hasFetched(e){return this._hasFetched=e,!1!==e&&(this.fetchQueue.forEach((e=>e())),!0)},fetchQueue:[],waitForFetch(){return new Promise((e=>{this.hasFetched?e():this.fetchQueue.push(e)}))},guide:t,addFavorite:o,removeFavorite:async e=>{const t=JSON.parse(localStorage.getItem(n)||"[]"),o=t.findIndex((({location:t,start:n,name:o})=>{const{location:a,start:r,name:i}=e;return t===a&&n===r&&o===i}));t.splice(o,1);const a=JSON.stringify(t);return localStorage.setItem(n,a),t},getFavorites:a,get locations(){return[...(this.guide?.events||[]).reduce(((e,t)=>h(t,"object")&&h(t.location,"string")?(e.add(t.location),e):e),new Set)]},get times(){const e=[...(this.guide?.events||[]).reduce(((e,t)=>h(t,"object")&&h(t.start,["number","date"])&&h(t.end,["number","date"])?(e.add(k(t.start)),e.add(k(t.end)),e):e),new Set)],t=new Date(Math.min(...e)),n=new Date(Math.max(...e)),o=e.reduce(((e,t)=>{if(15!==e){const n=t.getMinutes();30===n&&(e=30),15!==n&&45!==n||(e=15)}return e}),0),a=e=>({date:e,timeString:e.toLocaleTimeString("en-US",{timeStyle:"short"})}),r=e=>`${S(e.getDay())} ${e.toLocaleDateString()}`;let i={[r(t)]:[a(t)]},l=t;for(;l<n;){let t=null;Math.max(...e.filter((e=>e.getDate()===l.getDate())))===Number(l)?(t=new Date(e.find((e=>e>l))),i[r(t)]=[a(t)]):(t=new Date(l),t.setMinutes(t.getMinutes()+o),i[r(t)].push(a(t))),l=t}return{days:i,interval:o}}},M=async(e={})=>{if(await F.waitForFetch(),!u(e))throw"`getEvents()` expects an object in the first argument";const{include:t={},exclude:n={}}=e;f(t),f(n);const o={...e,include:{...t,after:t.after?Number(t.after):0,before:t.before?Number(t.before):1/0},exclude:{...n,after:n.after?Number(n.after):1/0,before:n.before?Number(n.before):0}},{include:a={},exclude:r={}}=o;return F.guide.events.filter((e=>!(e.start<a.after)&&(!(e.start>r.after)&&(!(e.end>a.before)&&(!(e.end<r.before)&&(!("locations"in a&&!contains(a.locations,e.location))&&((!("locations"in r)||!contains(r.locations,e.location))&&(!("search"in a&&!contains(e.name,a.search))&&(!("search"in r)||!contains(e.name,r.search))))))))))},N=async()=>(await F.waitForFetch(),F.locations),O=async()=>(await F.waitForFetch(),F.times),L=async e=>await F.addFavorite(e),A=async e=>await F.removeFavorite(e),C=async()=>await F.getFavorites();var z=Object.freeze({__proto__:null,init:async(t=r)=>{const n=await t(),{guide:o}=n;if(!u(n))throw"`init()` must return an object";if(!u(o))throw"The `guide` field expects an object";if("events"in o){if(!h(o.events,"array"))throw"The `guide.events` field expects an array";const e=v(l,"event",{start:"date",end:"date"});F.guide.events=o.events.map(e)}if("floorPlan"in o){if(!u(o.floorPlan))throw"The `guide.floorPlan` field expects an object";const t=v(e,"floor plan"),n=v(s,"clickable area"),a=t(o.floorPlan);F.guide.floorPlan={...a,clickableAreas:a.clickableAreas.map(n)}}if("addFavorite"in n){if(!h(n.addFavorite,"function"))throw"The `addFavorite` field expects a function";F.addFavorite=n.addFavorite}if("removeFavorite"in n){if(!h(n.removeFavorite,"function"))throw"The `removeFavorite` field expects a function";F.removeFavorite=n.removeFavorite}if("getFavorites"in n){if(!h(n.getFavorites,"function"))throw"The `getFavorites` field expects a function";F.getFavorites=n.getFavorites}F.hasFetched=!0},addFavorite:L,removeFavorite:A,getFavorites:C,getEvents:M,getLocations:N,getTimes:O,getFloorPlan:async()=>(await waitForFetch(),F.guide.floorPlan)});const I=e=>({...e,start:new Date(e.start),end:new Date(e.end)}),j=({events:e,spanState:t,date:n,interval:o,_location:a,sortBy:r,currentTime:i})=>{const l=e.find((e=>Number(e.start)===Number(n)&&e.location===a)),s=l||e.find((e=>Number(e.end)>Number(n)&&Number(e.start)<Number(i)&&e.location===a)),c=!!s&&s.start<i,d=s?s.name:"",p=s?"data":"data-empty",g=s?$((s.end-(e=>c?i:e.start)(s))/1e3/60):0,h=g?$(g/o):1,u="location"===r?t[a]>0:t[a]>1;return u?--t[a]:h>1&&(t[a]=h),{eventName:d,cellType:p,span:h,blank:u,event:s,hasStarted:c}},P=({locations:e,times:t,activeDay:n,activeTime:o,dataset:a})=>{const{breakpoint:r=d}=a,i=!window.matchMedia(`(max-width: ${r})`).matches,{days:l,interval:s}=t||c,p=e=>e.toLocaleTimeString([],{hour12:!1,timeStyle:"short"}),g=p(o),h=l[n],u=p(h[0].date),m=p(h[h.length-1].date),v=60*s;return`\n    <section class="pg-dialog-body">\n      <header class="pg-dialog-header">\n        <h1 class="pg-dialog-title">Options</h1>\n        <button class="pg-dialog-close" title="Close" onclick="${D("toggleSortDialog",!1)}"><i class="pg-close-icon" title="Close"></i></button>\n      </header>\n      <section class="pg-dialog-content">\n        <menu class="pg-dialog-menu">\n          <button class="pg-dialog-menu-item" onclick="${D("selectSortBy","favorites")}">\n            <i class="pg-favorite-icon" title="View Favorites">&starf;</i>\n            <span>View Favorites</span>\n          </button>\n        </menu>\n        <menu class="pg-dialog-menu">\n          <h2 class="pg-dialog-menu-title">Which day?</h2>\n          <select class="pg-dialog-select" onchange="${D("selectActiveDay")}">\n            ${y(Object.keys(l),(e=>`\n              <option value="${e}" ${e===n?"selected":""}>${e}</option>\n            `))}\n          </select>\n        </menu>\n        <menu class="pg-dialog-menu">\n          <h2 class="pg-dialog-menu-title">Filter by Time</h2>\n          <button class="pg-dialog-menu-item" onclick="${D("selectSortBy","allTime")}" autofocus>All Times This Day</button>\n          <button class="pg-dialog-menu-item" onclick="${D("selectSortBy","now")}">Right Now &amp; Onward</button>\n          <button class="pg-dialog-menu-item" onclick="${D("selectSortBy","nowOnly")}">Right Now Only</button>\n          <div class="pg-dialog-menu-special-item">\n            <div class="pg-dialog-menu-item pg-dialog-menu-item--input">\n              <input\n                type="time"\n                class="pg-dialog-menu-input pg-dialog-menu-input--time"\n                value="${g}"\n                min="${u}"\n                max="${m}"\n                step="${v}"\n                onchange="${D("selectActiveTime")}"\n              />\n              <span class="pg-inline-text">&amp; On</span>\n            </div>\n            <button class="pg-dialog-menu-item" onclick="${D("selectSortBy","time")}">Go &roarr;</button>\n          </div>\n        </menu>\n        <menu class="pg-dialog-menu">\n          <h2 class="pg-dialog-menu-title">Filter by Location</h2>\n          ${i?`<button class="pg-dialog-menu-item" onclick="${D("selectSortBy","location")}">All Locations</button>`:y(e,(e=>`\n              <button class="pg-dialog-menu-item" onclick="${D("selectActiveLocation",e)}">${e}</button>\n            `))}\n        </menu>\n      </section>\n    </section>\n  `},R=({favorites:e,activeEvent:t})=>{const n=e.find((({location:e,start:n,name:o})=>{const{location:a,start:r,name:i}=t;return e===a&&Number(new Date(n))===Number(r)&&o===i})),o=n?"removeFavorite":"addFavorite",a=n?"Remove from Favorites":"Add to Favorites";return`\n    <article class="pg-dialog-body">\n      <header class="pg-dialog-header">\n        <h1 class="pg-dialog-title">${t.name}</h1>\n        <button class="pg-dialog-close" onclick="${D("closeEventDialog")}"><i class="pg-close-icon" title="Close"></i></button>\n      </header>\n      <section class="pg-dialog-content pg-dialog-content--text-container">\n        ${y(t.description.split(/\n/),(e=>`\n          <p class="pg-dialog-paragraph">${e}</p>\n        `))}\n      </section>\n      <footer class="pg-dialog-footer">\n        <time datetime="${t.start.toISOString()}" class="pg-time pg-time--start">\n          ${t.start.toLocaleTimeString("en-US",{timeStyle:"short"})}\n        </time>\n        to\n        <time datetime="${t.end.toISOString()}" class="pg-time pg-time--end">\n          ${t.end.toLocaleTimeString("en-US",{timeStyle:"short"})}\n        </time>\n        <div>@ ${t.location}</div>\n        <div class="pg-dialog-details">\n          <div><strong>Hosted by:</strong> <span>${t.host}</span></div>\n          <div><strong>Category:</strong> <span>${t.category}</span></div>\n        </div>\n      </footer>\n      <section class="pg-dialog-content">\n        <menu class="pg-dialog-menu">\n          <button class="pg-dialog-menu-item" onclick="${D(o,t)}" autofocus>\n            <span>${a}</span>\n            <i class="pg-favorite-icon" title="${a}">&starf;</i>\n          </button>\n        </menu>\n      </section>\n    </article>\n  `},B=({activeLocation:e,events:t,times:n,locations:o,sortBy:a,activeDay:r})=>{const{days:i,interval:l}=n||c,s={},d=(t,n)=>e===t?n:"",p=i[r];return`\n    <div class="pg-table-wrapper">\n      <table class="pg-table">\n        <thead class="pg-header">\n          <tr class="pg-row">\n            <td class="pg-cell-wrapper pg-cell-wrapper--corner" onclick="${D("toggleSortDialog",!0)}">\n              <div class="pg-cell pg-cell--corner"><i class="pg-more-icon" title="Options..."></i> <span class="pg-corner-text">${r}</span></div>\n            </td>\n            ${y(o,(e=>`\n              <th class="pg-cell-wrapper pg-cell-wrapper--column-header ${d(e,"pg-cell-wrapper--column-header-active")}">\n                <div class="pg-cell pg-cell--column-header ${d(e,"pg-cell--column-header-active")}">${e}</div>\n              </th>\n            `))}\n          </tr>\n        </thead>\n        <tbody class="pg-body">\n          ${y(p,(({date:e,timeString:n})=>`\n            <tr class="pg-row">\n              <th class="pg-cell-wrapper pg-cell-wrapper--row-header">\n                <div class="pg-cell pg-cell--row-header">${n}</div>\n              </th>\n              ${y(o,(n=>{const{eventName:o,cellType:r,span:i,blank:c,event:p}=j({events:t,spanState:s,date:e,interval:l,_location:n,sortBy:a});return c?"":`\n                  <td\n                    class="pg-cell-wrapper pg-cell-wrapper--${r} ${d(n,`pg-cell-wrapper--${r}-active`)}"\n                    rowspan="${i}"\n                    id="${p?_(p):""}"\n                    ${p?`onclick="${D("openEventDialog",p)}"`:""}\n                  >\n                    <div class="pg-cell pg-cell--${r} ${d(n,`pg-cell--${r}-active`)}">${T(o)}</div>\n                  </td>\n                `}))}\n            </tr>\n          `))}\n        </tbody>\n      </table>\n    </div>\n  `},H=({events:e,times:t,locations:n,sortBy:o,activeTime:a,activeDay:r})=>{const{days:i,interval:l}=t||c,s={},d=i[r],p=k(Date.now(),l),{day:g,date:h,time:u}=x(p),m={now:d.filter((({date:e})=>e>=p)),nowOnly:d.filter((({date:e})=>e===p)),time:d.filter((({date:e})=>e>=a)),allTime:d}[o],v=m.length?m:[{date:p,timeString:u}],f=m.length?r:`${g} ${h}`,b={now:p,nowOnly:p,time:a,allTime:new Date(0)}[o];return`\n    <div class="pg-table-wrapper">\n      <table class="pg-table">\n        <thead class="pg-header">\n          <tr class="pg-row">\n            <td class="pg-cell-wrapper pg-cell-wrapper--corner" onclick="${D("toggleSortDialog",!0)}">\n              <div class="pg-cell pg-cell--corner"><i class="pg-more-icon" title="Options..."></i> <span class="pg-corner-text">${f}</span></div>\n            </td>\n            ${y(v,(({date:e,timeString:t})=>`\n              <th class="pg-cell-wrapper pg-cell-wrapper--column-header pg-cell-wrapper--column-header-time ${e===p?"pg-cell-wrapper--column-header-active-time":""}">\n                <div class="pg-cell pg-cell--column-header pg-cell--column-header-time">\n                  <span>${t}</span>\n                  <div>${e===p?"(Current Time)":""}</div>\n                </div>\n              </th>\n            `))}\n          </tr>\n        </thead>\n        <tbody class="pg-body">\n          ${y(n,(t=>`\n            <tr class="pg-row">\n              <th class="pg-cell-wrapper pg-cell-wrapper--row-header pg-cell-wrapper--row-header-time" onclick="${D("toggleHeaders")}">\n                <div class="pg-cell pg-cell--row-header">${t}</div>\n              </th>\n              ${y(v,(({date:n})=>{const{eventName:a,cellType:r,span:i,blank:c,event:d,hasStarted:p}=j({events:e,spanState:s,date:n,interval:l,_location:t,sortBy:o,currentTime:b});return c?"":`\n                  <td\n                    class="pg-cell-wrapper pg-cell-wrapper--${r} pg-cell-wrapper--${r}-time ${p?"pg-cell-wrapper--overflow":""}"\n                    colspan="${i}"\n                    id="${d?_(d):""}"\n                    ${d?`onclick="${D("openEventDialog",d)}"`:""}\n                  >\n                    <div class="pg-cell pg-cell--${r} pg-cell--${r}-time">${T(a)}</div>\n                  </td>\n                `}))}\n            </tr>\n          `))}\n        </tbody>\n      </table>\n    </div>\n  `},V=({favorites:e})=>`\n  <div class="pg-table-wrapper">\n    <table class="pg-table">\n      <thead class="pg-header">\n        <tr class="pg-row">\n          <td class="pg-cell-wrapper pg-cell-wrapper--corner" onclick="${D("toggleSortDialog",!0)}">\n            <div class="pg-cell pg-cell--corner"><i class="pg-more-icon" title="Options..."></i> Favorites</div>\n          </td>\n        </tr>\n      </thead>\n      <tbody class="pg-body">\n        ${0===e.length?'\n              <tr class="pg-row">\n                <td class="pg-cell-wrapper pg-cell-wrapper--data pg-cell-wrapper--data-favorite">\n                  <div class="pg-cell pg-cell--data pg-cell--data-favorite">You have no favorites.</div>\n                </td>\n              </tr>\n            ':y(e,(e=>{const{start:t,end:n,name:o,location:a}=e,r=x(t),i=x(n),l=`${r.day} ${r.date}`,s=r.time,c=i.time;return`\n              <tr class="pg-row">\n                <td class="pg-cell-wrapper pg-cell-wrapper--data pg-cell-wrapper--data-favorite" onclick="${D("openEventDialog",e)}">\n                  <div class="pg-cell pg-cell--data pg-cell--data-favorite">\n                    <span class="pg-search-result-name">${T(o)}</span>\n                    <span class="pg-inline-result-details">${l}</span>\n                    <span class="pg-search-result-details">\n                      <span class="pg-inline-text">${s}</span>\n                      <span class="pg-inline-text">- ${c}</span>\n                      <span class="pg-inline-text"> @ ${a}</span>\n                    </span>\n                  </div>\n                </td>\n              </tr>\n            `}))}\n      </tbody>\n    </table>\n  </div>\n`,U=({searchResults:e})=>`\n  <div class="pg-table-wrapper">\n    <table class="pg-table">\n      <thead class="pg-header">\n        <tr class="pg-row">\n          <td class="pg-cell-wrapper pg-cell-wrapper--corner" onclick="${D("toggleSortDialog",!0)}">\n            <div class="pg-cell pg-cell--corner"><i class="pg-more-icon" title="Options..."></i> Search Results</div>\n          </td>\n        </tr>\n      </thead>\n      <tbody class="pg-body">\n        ${0===e.length?'\n              <tr class="pg-row">\n                <td class="pg-cell-wrapper pg-cell-wrapper--data pg-cell-wrapper--data-search">\n                  <div class="pg-cell pg-cell--data pg-cell--data-search">No results found.</div>\n                </td>\n              </tr>\n            ':y(e,(e=>{const{start:t,end:n,name:o,location:a}=e,r=x(t),i=x(n),l=`${r.day} ${r.date}`,s=r.time,c=i.time;return`\n              <tr class="pg-row">\n                <td class="pg-cell-wrapper pg-cell-wrapper--data pg-cell-wrapper--data-search" onclick="${D("openEventDialog",e)}">\n                  <div class="pg-cell pg-cell--data pg-cell--data-search">\n                    <span class="pg-search-result-name">${T(o)}</span>\n                    <span class="pg-inline-result-details">${l}</span>\n                    <span class="pg-search-result-details">\n                      <span class="pg-inline-text">${s}</span>\n                      <span class="pg-inline-text">- ${c}</span>\n                      <span class="pg-inline-text"> @ ${a}</span>\n                    </span>\n                  </div>\n                </td>\n              </tr>\n            `}))}\n      </tbody>\n    </table>\n  </div>\n`;var q=window.CustomEvent;function K(e,t){var n="on"+t.type.toLowerCase();return"function"==typeof e[n]&&e[n](t),e.dispatchEvent(t)}function J(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement?e.parentElement:e.parentNode?e.parentNode.host:null}return null}function Z(e){for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;e&&e.blur&&e!==document.body&&e.blur()}function Y(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1}function G(e){return!(!e||!e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function Q(e){var t=["button","input","keygen","select","textarea"].map((function(e){return e+":not([disabled])"}));t.push('[tabindex]:not([disabled]):not([tabindex=""])');var n=e.querySelector(t.join(", "));if(!n&&"attachShadow"in Element.prototype)for(var o=e.querySelectorAll("*"),a=0;a<o.length&&!(o[a].tagName&&o[a].shadowRoot&&(n=Q(o[a].shadowRoot)));a++);return n}function W(e){return e.isConnected||document.body.contains(e)}function X(e){if(e.submitter)return e.submitter;var t=e.target;if(!(t instanceof HTMLFormElement))return null;var n=ne.formSubmitter;if(!n){var o=e.target;n=("getRootNode"in o&&o.getRootNode()||document).activeElement}return n&&n.form===t?n:null}function ee(e){if(!e.defaultPrevented){var t=e.target,n=ne.imagemapUseValue,o=X(e);null===n&&o&&(n=o.value);var a=J(t);if(a)"dialog"===(o&&o.getAttribute("formmethod")||t.getAttribute("method"))&&(e.preventDefault(),null!=n?a.close(n):a.close())}}function te(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),e.addEventListener("submit",ee,!1),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window){new MutationObserver(this.maybeHideModal.bind(this)).observe(e,{attributes:!0,attributeFilter:["open"]})}else{var t,n=!1,o=function(){n?this.downgradeModal():this.maybeHideModal(),n=!1}.bind(this),a=function(a){if(a.target===e){var r="DOMNodeRemoved";n|=a.type.substr(0,r.length)===r,window.clearTimeout(t),t=window.setTimeout(o,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach((function(t){e.addEventListener(t,a)}))}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("mouseup",this.backdropMouseEvent_.bind(this)),this.backdrop_.addEventListener("mousedown",this.backdropMouseEvent_.bind(this)),this.backdrop_.addEventListener("click",this.backdropMouseEvent_.bind(this))}q&&"object"!=typeof q||((q=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),n}).prototype=window.Event.prototype),te.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&W(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),ne.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropMouseEvent_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var n=document.createEvent("MouseEvents");n.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(n),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),e||(e=Q(this.dialog_)),Z(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!W(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!ne.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),n=function(e,n){return!(void 0===t[e]||t[e]===n)};if(t.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===t.isolation||"fixed"===t.position||"touch"===t.webkitOverflowScrolling)return!0;e=e.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,ne.needsCentering(this.dialog_)?(ne.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(e){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==e&&(this.dialog_.returnValue=e);var t=new q("close",{bubbles:!1,cancelable:!1});K(this.dialog_,t)}};var ne={reposition:function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,n=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,n)+"px"},isInlinePositionSetByStylesheet:function(e){for(var t=0;t<document.styleSheets.length;++t){var n=document.styleSheets[t],o=null;try{o=n.cssRules}catch(e){}if(o)for(var a=0;a<o.length;++a){var r=o[a],i=null;try{i=document.querySelectorAll(r.selectorText)}catch(e){}if(i&&Y(i,e)){var l=r.style.getPropertyValue("top"),s=r.style.getPropertyValue("bottom");if(l&&"auto"!==l||s&&"auto"!==s)return!0}}}return!1},needsCentering:function(e){return"absolute"===window.getComputedStyle(e).position&&(!("auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom)&&!ne.isInlinePositionSetByStylesheet(e))},forceRegisterDialog:function(e){if((window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new te(e)},registerDialog:function(e){e.showModal||ne.forceRegisterDialog(e)},DialogManager:function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0,t.stopPropagation(),e([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver((function(t){var n=[];t.forEach((function(e){for(var t,o=0;t=e.removedNodes[o];++o)t instanceof Element&&("dialog"===t.localName&&n.push(t),n=n.concat(t.querySelectorAll("dialog")))})),n.length&&e(n)})))}};if(ne.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},ne.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},ne.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,n=0;e=this.pendingDialogStack[n];++n)e.updateZIndex(--t,--t),0===n&&(this.overlay.style.zIndex=--t);var o=this.pendingDialogStack[0];o?(o.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},ne.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=J(e);){for(var t,n=0;t=this.pendingDialogStack[n];++n)if(t.dialog===e)return 0===n;e=e.parentElement}return!1},ne.DialogManager.prototype.handleFocus_=function(e){var t=e.composedPath?e.composedPath()[0]:e.target;if(!this.containedByTopDialog_(t)&&document.activeElement!==document.documentElement&&(e.preventDefault(),e.stopPropagation(),Z(t),void 0!==this.forwardTab_)){var n=this.pendingDialogStack[0];return n.dialog.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?n.focus_():t!==document.documentElement&&document.documentElement.focus()),!1}},ne.DialogManager.prototype.handleKey_=function(e){if(this.forwardTab_=void 0,27===e.keyCode){e.preventDefault(),e.stopPropagation();var t=new q("cancel",{bubbles:!1,cancelable:!0}),n=this.pendingDialogStack[0];n&&K(n.dialog,t)&&n.dialog.close()}else 9===e.keyCode&&(this.forwardTab_=!e.shiftKey)},ne.DialogManager.prototype.checkDOM_=function(e){this.pendingDialogStack.slice().forEach((function(t){-1!==e.indexOf(t.dialog)?t.downgradeModal():t.maybeHideModal()}))},ne.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t)&&(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),!0)},ne.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);-1!==t&&(this.pendingDialogStack.splice(t,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},ne.dm=new ne.DialogManager,ne.formSubmitter=null,ne.imagemapUseValue=null,void 0===window.HTMLDialogElement){var oe=document.createElement("form");if(oe.setAttribute("method","dialog"),"dialog"!==oe.method){var ae=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(ae){var re=ae.get;ae.get=function(){return G(this)?"dialog":re.call(this)};var ie=ae.set;ae.set=function(e){return"string"==typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):ie.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",ae)}}document.addEventListener("click",(function(e){if(ne.formSubmitter=null,ne.imagemapUseValue=null,!e.defaultPrevented){var t=e.target;if("composedPath"in e)t=e.composedPath().shift()||t;if(t&&G(t.form)){if(!("submit"===t.type&&["button","input"].indexOf(t.localName)>-1)){if("input"!==t.localName||"image"!==t.type)return;ne.imagemapUseValue=e.offsetX+","+e.offsetY}J(t)&&(ne.formSubmitter=t)}}}),!1),document.addEventListener("submit",(function(e){var t=e.target;if(!J(t)){var n=X(e);"dialog"===(n&&n.getAttribute("formmethod")||t.getAttribute("method"))&&e.preventDefault()}}));var le=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!G(this))return le.call(this);var e=J(this);e&&e.close()}}class se extends HTMLElement{constructor(){super();const e=this;e.root=e.attachShadow({mode:"open"}),e.locations=[],e.events=[],e.times=c,e.activeDay="",e.activeLocation="",e.activeEvent=I(l),e.sortBy="location",e.favorites=[],e.currentSearch="",e.searchResults=[],e.handleEsc=t=>{"Esc"!==t.key&&"Escape"!==t.key||(t.preventDefault(),e.toggleSortDialog(!1),e.closeEventDialog(),e.render())},e.render({loading:!0}),N().then((async t=>{e.events=await M(),e.times=await O(),e.favorites=await C(),e.locations=t,e.activeLocation=t[0];const{days:n}=e.times||c;e.activeDay=Object.keys(n)[0];const o=n[e.activeDay][0].date,{date:a,time:r}=x(o);e.activeTime=new Date(`${a} ${r}`),e.render()}))}connectedCallback(){window.addEventListener("keydown",this.handleEsc)}disconnectedCallback(){window.removeEventListener("keydown",this.handleEsc)}render({loading:e}={}){const t=this;b(t.root);const{css:n,breakpoint:o}=t.dataset,a=n||(e=>`\n  :host {\n\n    /* general fonts */\n    --font: inherit;\n    --font-secondary: var(--font);\n\n    /* specific fonts */\n    --font-header: var(--font);\n    --font-content: var(--font-secondary);\n    --font-column-header: var(--font-header);\n    --font-row-header: var(--font-header);\n\n    /* padding */\n    --padding-cell: 1rem 2rem;\n    --padding-header: var(--padding-cell);\n    --padding-column-header: var(--padding-header);\n    --padding-row-header: var(--padding-header);\n\n    /* general colors */\n    --color-primary: lightsteelblue;\n    --color-primary-contrast: black;\n    --color-secondary: steelblue;\n    --color-secondary-contrast: white;\n    --color-tertiary: midnightblue;\n\n    /* specific colors */\n    --color-background: var(--color-tertiary);\n    --color-cell: var(--color-primary);\n    --color-empty: transparent;\n    --color-content: var(--color-primary-contrast);\n    --color-header: var(--color-secondary);\n    --color-header-content: var(--color-secondary-contrast);\n    --color-column-header: var(--color-header);\n    --color-column-header-content: var(--color-header-content);\n    --color-row-header: var(--color-header);\n    --color-row-header-content: var(--color-header-content);\n    --color-corner: var(--color-header);\n    --color-corner-content: var(--color-header-content);\n  }\n\n  /* remove browser defaults so fonts can be fully customized */\n  :host, button, input {\n    font-family: var(--font-secondary);\n    font-size: inherit;\n  }\n\n  .pg-search-bar {\n    background-color: var(--color-background);\n    display: grid;\n    gap: 0.2rem;\n    grid-template-columns: 1fr auto;\n    margin: 0;\n    padding: 0.2rem 0.2rem 0;\n  }\n  .pg-search-icon {\n    border: 0.2rem solid;\n    border-radius: 50%;\n    display: block;\n    height: 0.8rem;\n    position: relative;\n    transform: translate(-0.15rem, -0.1rem);\n    width: 0.8rem;\n  }\n  .pg-search-icon:after {\n    background-color: var(--color-content);\n    bottom: -0.2rem;\n    content: '';\n    display: block;\n    height: 0.2rem;\n    width: 0.5rem;\n    position: absolute;\n    right: -0.4rem;\n    transform: rotate(45deg);\n  }\n  .pg-table-wrapper {\n    overflow: auto;\n    max-width: 100%;\n    margin-bottom: 1rem;\n    position: relative;\n  }\n  .pg-table {\n    background-color: var(--color-background);\n    width: 100%;\n  }\n  .pg-cell-wrapper {\n    background-color: var(--color-cell);\n    font-family: var(--font-content);\n    padding: var(--padding-cell);\n    position: relative;\n    text-align: center;\n  }\n  .pg-cell-wrapper--overflow:before {\n    content: '\\2039';\n    font-size: 2.5rem;\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    margin: auto;\n    line-height: 2.5rem;\n  }\n  .pg-cell-wrapper--corner {\n    background-color: var(--color-corner);\n    color: var(--color-corner-content);\n    cursor: pointer;\n  }\n  .pg-cell-wrapper--row-header {\n    background-color: var(--color-row-header);\n    color: var(--color-row-header-content);\n    font-family: var(--font-row-header);\n    padding: var(--padding-row-header);\n    text-align: right;\n  }\n  .pg-cell-wrapper--row-header,\n  .pg-cell-wrapper--corner {\n    border-right: 0.1rem solid var(--color-background);\n    left: 0;\n    position: sticky;\n    width: 0; /* columns size to the minimum width */\n    z-index: 1;\n  }\n  .pg-cell--corner,\n  .pg-cell--row-header {\n    width: 9rem;\n  }\n  .pg-cell--row-header {\n    pointer-events: none;\n    user-select: none;\n  }\n  .pg-cell--data {\n    position: sticky;\n    left: 14rem;\n    margin: auto;\n    width: fit-content;\n    z-index: 0;\n  }\n  .pg-cell--data-search,\n  .pg-cell--data-favorite {\n    display: grid;\n    left: 0;\n    justify-content: center;\n    margin: auto;\n  }\n  .pg-search-result-name {\n    font-weight: bold;\n    padding-bottom: 0.8rem;\n  }\n  .pg-inline-text {\n    display: inline-block;\n  }\n  .pg-cell--corner {\n    align-items: center;\n    display: grid;\n    gap: 0.5rem;\n    grid-template-columns: auto auto;\n    justify-content: center;\n    margin: auto;\n  }\n  .pg-cell-wrapper--column-header {\n    background-color: var(--color-column-header);\n    color: var(--color-column-header-content);\n    font-family: var(--font-column-header);\n    padding: var(--padding-column-header);\n  }\n  .pg-cell-wrapper--column-header-active-time {\n    filter: brightness(1.3);\n  }\n  .pg-cell-wrapper--column-header-active-time > .pg-cell {\n    display: grid;\n    gap: 0;\n  }\n  .pg-cell--column-header {\n    align-items: center;\n    display: flex;\n    gap: 1rem;\n    justify-content: center;\n    min-width: 8rem;\n  }\n  .pg-cell-wrapper--data {\n    cursor: pointer;\n  }\n  .pg-cell-wrapper--data-empty {\n    background-color: var(--color-empty);\n  }\n  .pg-loading {\n    --color-loading-primary: steelblue;\n    --color-loading-secondary: white;\n    --size-loader: 5rem;\n    height: 10rem;\n    width: 100%;\n    position: relative;\n    z-index: 1;\n  }\n  .pg-loading:before,\n  .pg-loading:after {\n    bottom: 0;\n    border-radius: 50%;\n    content: '';\n    display: block;\n    left: 0;\n    margin: auto;\n    position: absolute;\n    right: 0;\n    top: 0;\n    z-index: 2;\n  }\n  @keyframes spin {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(359deg); }\n  }\n  .pg-loading:before {\n    animation: spin 1s linear infinite;\n    background-image: conic-gradient(var(--color-loading-primary), var(--color-loading-secondary));\n    border: 0.4rem solid var(--color-loading-primary);\n    height: var(--size-loader);\n    width: var(--size-loader);\n    z-index: 1;\n  }\n  .pg-loading:after {\n    background-color: var(--color-loading-primary);\n    border: 0 solid;\n    height: calc(var(--size-loader) - 1rem);\n    width: calc(var(--size-loader) - 1rem);\n    z-index: 2;\n  }\n  .pg-favorite-icon {\n    font-size: 2rem;\n    font-style: normal;\n    line-height: 2rem;\n  }\n  .pg-more-icon {\n    background-color: var(--color-header);\n    border: 0.8rem solid var(--color-header-content);\n    display: block;\n    position: relative;\n    vertical-align: middle;\n    z-index: 0;\n  }\n  .pg-more-icon,\n  .pg-more-icon:before,\n  .pg-more-icon:after {\n    border-radius: 50%;\n    height: 0.4rem;\n    width: 0.4rem;\n  }\n  .pg-more-icon:before,\n  .pg-more-icon:after {\n    background-color: var(--color-header);\n    border: 0 solid;\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    z-index: 1;\n  }\n  .pg-more-icon:before {\n    left: -0.5rem;\n  }\n  .pg-more-icon:after {\n    right: -0.5rem;\n  }\n  .pg-dialog {\n    background-color: var(--color-header);\n    bottom: 0;\n    border: 0 solid;\n    border-radius: 0.5rem;\n    box-shadow: 0 0 1rem rgba(0, 0, 0, 0.5);\n    box-sizing: border-box;\n    color: var(--color-header-content);\n    height: max-content;\n    left: 0;\n    margin: auto;\n    max-height: 100vh;\n    max-width: 40rem;\n    min-height: 40rem;\n    position: fixed;\n    right: 0;\n    top: 0;\n    width: calc(100% - 0.5rem);\n    z-index: 2;\n  }\n  .pg-dialog + .backdrop {\n    background-color: rgba(0, 0, 0, 0.8);\n  }\n  /* ::backdrop must be kept separate because of safari */\n  .pg-dialog::backdrop {\n    background-color: rgba(0, 0, 0, 0.8);\n  }\n  .pg-dialog-header {\n    display: grid;\n    grid-template-columns: 1fr auto;\n  }\n  .pg-dialog-title {\n    margin: 0;\n  }\n  .pg-dialog-details {\n    padding-top: 1rem;\n  }\n  .pg-dialog-select {\n    border: 0 solid;\n    border-radius: 0.3rem;\n    padding: 0.5rem;\n  }\n  .pg-dialog-close {\n    align-items: center;\n    background-color: var(--color-header-content);\n    border: 0 solid;\n    border-radius: 50%;\n    color: var(--color-header);\n    cursor: pointer;\n    display: flex;\n    height: 2rem;\n    justify-content: center;\n    width: 2rem;\n  }\n  .pg-close-icon {\n    height: 100%;\n    display: block;\n    position: relative;\n    width: 100%;\n  }\n  .pg-close-icon:before,\n  .pg-close-icon:after {\n    background-color: var(--color-header);\n    bottom: 0;\n    content: '';\n    display: block;\n    height: 1.3rem;\n    left: 0;\n    margin: auto;\n    position: absolute;\n    right: 0;\n    top: 0;\n    width: 0.2rem;\n  }\n  .pg-close-icon:before {\n    transform: rotate(45deg);\n  }\n  .pg-close-icon:after {\n    transform: rotate(-45deg);\n  }\n  .pg-dialog-menu {\n    display: grid;\n    gap: 0.5rem;\n    margin: 0 auto;\n    max-width: 30rem;\n    padding: 2rem 2rem 0;\n  }\n  .pg-dialog-menu-title {\n    width: max-content;\n    margin: 0 auto;\n  }\n  .pg-search-input,\n  .pg-search-button,\n  .pg-dialog-menu-item {\n    align-items: center;\n    background-color: var(--color-cell);\n    border: none;\n    box-shadow: 0 0 1.2rem rgba(0, 0, 0, 0.5);\n    color: var(--color-content);\n    cursor: pointer;\n    display: flex;\n    gap: 0.5rem;\n    justify-content: center;\n    padding: 1rem 0.5rem;\n  }\n  .pg-search-input,\n  .pg-dialog-menu-item--input,\n  .pg-dialog-menu-input {\n    cursor: text;\n  }\n  .pg-search-input,\n  .pg-search-button {\n    padding: 0.5rem 1rem;\n  }\n  .pg-search-input {\n    min-width: 0;\n  }\n  .pg-dialog-menu-input {\n    background-color: transparent;\n    border: none;\n  }\n  .pg-dialog-menu-input--time {\n    width: 10.2rem;\n  }\n  .pg-dialog-menu-special-item {\n    display: grid;\n    gap: 0.5rem;\n    grid-template-columns: 2fr 1fr;\n  }\n  .pg-dialog-body {\n    display: grid;\n    grid-auto-rows: auto;\n    grid-template-rows: auto minmax(0, 1fr);\n    height: 100%;\n    max-height: calc(100vh - 2rem);\n    min-height: 38rem;\n    overflow: hidden;\n    position: relative;\n  }\n  .pg-dialog-body:before,\n  .pg-dialog-body:after {\n    content: '\\02771';\n    color: var(--color-header);\n    display: inline-block;\n    font-size: 3rem;\n    height: 3rem;\n    left: 0;\n    line-height: 3rem;\n    margin: auto;\n    position: absolute;\n    right: 0;\n    width: 3rem;\n  }\n  .pg-dialog-body:before {\n    top: 1rem;\n    transform: rotate(-90deg);\n  }\n  .pg-dialog-body:after {\n    bottom: -1.8rem;\n    transform: rotate(90deg);\n  }\n  .pg-dialog-content {\n    overflow: auto;\n    padding-bottom: 2rem;\n  }\n  .pg-dialog-content--text-container,\n  .pg-dialog-footer {\n    background-color: var(--color-cell);\n    border: 0 solid;\n    border-radius: 0.5rem;\n    color: var(--color-content);\n    margin: 2rem 0 0;\n    text-align: center;\n  }\n  .pg-dialog-content--text-container:after {\n    background-image: linear-gradient(transparent, var(--color-cell) 90%);\n    bottom: -2rem;\n    content: '';\n    display: block;\n    height: 4rem;\n    left: 0;\n    position: sticky;\n    width: 100%;\n  }\n  .pg-dialog-paragraph {\n    margin: 0;\n    padding: 1rem;\n  }\n  .pg-time {\n    display: inline-block;\n    font-weight: bold;\n  }\n  .pg-dialog-footer {\n    padding: 1rem;\n  }\n  @media (max-width: ${e}) {\n    .pg-cell-wrapper--column-header,\n    .pg-cell-wrapper--data,\n    .pg-cell-wrapper--data-empty,\n    .pg-cell-wrapper--corner-collapsed .pg-corner-text {\n      display: none;\n    }\n    .pg-cell-wrapper--column-header-active,\n    .pg-cell-wrapper--column-header-time,\n    .pg-cell-wrapper--data-active,\n    .pg-cell-wrapper--data-time,\n    .pg-cell-wrapper--data-favorite,\n    .pg-cell-wrapper--data-search,\n    .pg-cell-wrapper--data-empty-time,\n    .pg-cell-wrapper--data-empty-active {\n      display: revert;\n      min-width: 0;\n    }\n    .pg-cell--data {\n      margin: 0;\n    }\n    .pg-cell--data-search,\n    .pg-cell--data-favorite {\n      margin: auto;\n    }\n    .pg-cell-wrapper--corner,\n    .pg-cell-wrapper--row-header-time,\n    .pg-cell-wrapper--row-header-time:after {\n      transition: all 0.5s;\n    }\n    .pg-cell-wrapper--row-header-time {\n      cursor: pointer;\n    }\n    .pg-cell-wrapper--row-header-time:after {\n      bottom: 0;\n      content: '\\25C0';\n      display: inline-block;\n      font-size: 1rem;\n      height: 1rem;\n      margin: auto;\n      position: absolute;\n      right: 0;\n      top: 0;\n    }\n    .pg-cell-wrapper--corner-collapsed,\n    .pg-cell-wrapper--row-header-collapsed {\n      left: -9.5rem;\n    }\n    .pg-cell-wrapper--row-header-collapsed:after {\n      transform: rotate(180deg);\n    }\n    .pg-cell-wrapper--corner-collapsed {\n      padding-right: 0;\n    }\n    .pg-cell-wrapper--corner-collapsed .pg-cell--corner {\n      grid-template-columns: auto;\n      justify-content: right;\n    }\n  }\n`)(o||d);if(e){const e=document.createElement("template");return e.innerHTML=`\n        <style>${a}</style>\n        <div class="pg-loading"></div>\n      `,t.root.appendChild(e.content.cloneNode(!0)),!0}const r={location:B,time:H,allTime:H,now:H,nowOnly:H,favorites:V,search:U}[t.sortBy],i=document.createElement("template");return i.innerHTML=`\n      <style>\n        /* typical browser defaults for dialog polyfill */\n        dialog + .backdrop { position: fixed; top: 0; right: 0; bottom: 0; left: 0; background: rgba(0, 0, 0, 0.1); }\n        ${a}\n      </style>\n      ${(({currentSearch:e})=>`\n  <form class="pg-search-bar" onsubmit="${D("search")}">\n    <input class="pg-search-input" onchange="${D("changeSearch")}" placeholder="Search events ..." value="${e}" />\n    <button class="pg-search-button"><i class="pg-search-icon" title="Search"></i></button>\n  </form>\n`)(t)}\n      ${r(t)}\n      <dialog class="pg-dialog pg-dialog--sort">${P(t)}</dialog>\n      <dialog class="pg-dialog pg-dialog--event">${R(t)}</dialog>\n    `,t.root.appendChild(i.content.cloneNode(!0)),t.registerDialogs(),!0}async addFavorite(e){const t=decodeURIComponent(e),n=JSON.parse(t);return this.favorites.push(n),this.render(),await L(n)}async removeFavorite(e){const t=this,n=decodeURIComponent(e),o=JSON.parse(n),a=t.favorites.findIndex((({location:e,start:t,name:n})=>{const{location:a,start:r,name:i}=o;return e===a&&t===r&&n===i}));return t.favorites.splice(a,1),t.render(),await A(o)}toggleHeaders({target:e}){const t=this.root.querySelectorAll(".pg-cell-wrapper--row-header"),n="pg-cell-wrapper--row-header-collapsed",o=e.classList.contains(n)?"remove":"add";for(const e of t)e.classList[o](n);this.root.querySelector(".pg-cell-wrapper--corner").classList[o]("pg-cell-wrapper--corner-collapsed")}toggleSortDialog(e){const t="true"===e||!!e,n=this.root.querySelector(".pg-dialog--sort"),o=w(P(this));b(n),n.appendChild(o),t?n.showModal():n.close()}openEventDialog(e){const t=this,n=decodeURIComponent(e),o=JSON.parse(n);t.activeEvent=I(o);const a=t.root.querySelector(".pg-dialog--event"),r=w(R(t));b(a),a.appendChild(r),a.showModal()}closeEventDialog(){this.root.querySelector(".pg-dialog--event").close()}selectActiveLocation(e){const t=this;t.sortBy="location",t.activeLocation=e,t.toggleSortDialog(!1),t.render()}selectActiveDay(e){const t=this,n=t.activeDay=e.target.value,o=t.activeTime.toLocaleTimeString();t.activeTime=new Date(`${n} ${o}`)}selectActiveTime({target:e}){const t=this;e.min>e.value&&(e.value=e.min),e.max<e.value&&(e.value=e.max);const{interval:n}=t.times||c,[o,a]=e.value.split(":"),r=Math.round(a/n)*n,i=1===String(r).length?`0${r}`:r;e.value=`${o}:${i}`;const{activeDay:l}=t,s=e.value;t.activeTime=new Date(`${l} ${s}`)}selectSortBy(e){const t=this;t.sortBy=e,t.toggleSortDialog(!1),t.render()}changeSearch({target:e}){this.currentSearch=e.value}search(e){e.preventDefault();const t=this,{currentSearch:n,events:o}=t;t.searchResults=o.filter((e=>E(n,e.name)||E(n,e.location)||E(n,e.host)||E(n,e.category)||E(n,e.description))),t.searchResults.sort(((e,t)=>{const o=E(n,e.name),a=E(n,t.name);return!o&&a?1:o&&!a?-1:0})),t.sortBy="search",t.render()}registerDialogs(){const e=this.root.querySelectorAll(".pg-dialog");for(const t of e)ne.registerDialog(t)}}return{...z,Components:Object.freeze({__proto__:null,ProgramGuideNative:se})}}));