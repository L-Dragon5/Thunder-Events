{"version":3,"file":"programGuideNative.min.mjs","sources":["../../lib/constants.js","../../lib/utilities.js","../../lib/state.js","../../lib/exports.js","../../lib/uiComponents/ProgramGuideNative/componentUtils.js","../../lib/uiComponents/ProgramGuideNative/styles/dialogPolyfill.js","../../lib/uiComponents/ProgramGuideNative/styles/dialog.js","../../lib/uiComponents/ProgramGuideNative/styles/theme.js","../../lib/uiComponents/ProgramGuideNative/styles/loading.js","../../lib/uiComponents/ProgramGuideNative/styles/mobile.js","../../lib/uiComponents/ProgramGuideNative/styles/search.js","../../lib/uiComponents/ProgramGuideNative/styles/table.js","../../lib/uiComponents/ProgramGuideNative/styles/icons.js","../../lib/uiComponents/ProgramGuideNative/styles/floorPlan.js","../../lib/uiComponents/ProgramGuideNative/getStyles.js","../../lib/uiComponents/ProgramGuideNative/render/renderSortDialog.js","../../lib/uiComponents/ProgramGuideNative/render/renderEventDialog.js","../../lib/uiComponents/ProgramGuideNative/render/renderByLocation.js","../../lib/uiComponents/ProgramGuideNative/render/renderByTime.js","../../lib/uiComponents/ProgramGuideNative/render/renderFavorites.js","../../lib/uiComponents/ProgramGuideNative/render/renderSearchBar.js","../../lib/uiComponents/ProgramGuideNative/render/renderSearchResults.js","../../lib/uiComponents/ProgramGuideNative/render/renderFloorPlan.js","../../node_modules/dialog-polyfill/dist/dialog-polyfill.esm.js","../../lib/uiComponents/ProgramGuideNative/render/index.js","../../lib/uiComponents/ProgramGuideNative/actions/addFavorite.js","../../lib/uiComponents/ProgramGuideNative/actions/removeFavorite.js","../../lib/uiComponents/ProgramGuideNative/actions/handleEsc.js","../../lib/uiComponents/ProgramGuideNative/actions/handleHashChange.js","../../lib/uiComponents/ProgramGuideNative/actions/showFloorPlan.js","../../lib/uiComponents/ProgramGuideNative/actions/toggleFloorPlanInteractive.js","../../lib/uiComponents/ProgramGuideNative/actions/toggleHeaders.js","../../lib/uiComponents/ProgramGuideNative/actions/toggleSortDialog.js","../../lib/uiComponents/ProgramGuideNative/actions/openEventDialog.js","../../lib/uiComponents/ProgramGuideNative/actions/closeEventDialog.js","../../lib/uiComponents/ProgramGuideNative/actions/selectActiveLocation.js","../../lib/uiComponents/ProgramGuideNative/actions/selectActiveDay.js","../../lib/uiComponents/ProgramGuideNative/actions/selectActiveTime.js","../../lib/uiComponents/ProgramGuideNative/actions/selectSortBy.js","../../lib/uiComponents/ProgramGuideNative/actions/changeSearch.js","../../lib/uiComponents/ProgramGuideNative/actions/search.js","../../lib/uiComponents/ProgramGuideNative/actions/showFloorPlanMessage.js","../../lib/uiComponents/ProgramGuideNative/actions/maximize.js","../../lib/uiComponents/ProgramGuideNative/index.js"],"sourcesContent":["export const DEFAULT_FLOOR_PLAN = {\r\n  title: 'Venue',\r\n  imageSrc: '',\r\n  dimensions: {\r\n    height: 600,\r\n    width: 800,\r\n  },\r\n  clickableAreas: [],\r\n}\r\n\r\nexport const DEFAULT_GUIDE = {\r\n  locations: [],\r\n  events: [],\r\n  floorPlan: DEFAULT_FLOOR_PLAN,\r\n  rollOverTime: '12:00 AM',\r\n}\r\n\r\nconst FAVORITES_KEY = 'FAVORITE_EVENTS'\r\n\r\nexport const DEFAULT_ADD_FAVORITE = async event => {\r\n  const favoriteEvents = JSON.parse(localStorage.getItem(FAVORITES_KEY) || '[]')\r\n  favoriteEvents.push(event)\r\n  const eventsJSON = JSON.stringify(favoriteEvents)\r\n  localStorage.setItem(FAVORITES_KEY, eventsJSON)\r\n  return favoriteEvents\r\n}\r\n\r\nexport const DEFAULT_REMOVE_FAVORITE = async event => {\r\n  const favoriteEvents = JSON.parse(localStorage.getItem(FAVORITES_KEY) || '[]')\r\n  const removeIndex = favoriteEvents.findIndex(({ location: _location, start, name }) => {\r\n    const { location: cLocation, start: cStart, name: cName } = event\r\n    return _location === cLocation && start === cStart && name === cName\r\n  })\r\n  favoriteEvents.splice(removeIndex, 1)\r\n  const eventsJSON = JSON.stringify(favoriteEvents)\r\n  localStorage.setItem(FAVORITES_KEY, eventsJSON)\r\n  return favoriteEvents\r\n}\r\n\r\nexport const DEFAULT_GET_FAVORITES = async () => {\r\n  const favoriteEvents = JSON.parse(localStorage.getItem(FAVORITES_KEY) || '[]')\r\n  return favoriteEvents\r\n}\r\n\r\nexport const DEFAULT_FETCH_DATA = () => Promise.resolve({\r\n  guide: DEFAULT_GUIDE,\r\n  addFavorite: DEFAULT_ADD_FAVORITE,\r\n  getFavorites: DEFAULT_GET_FAVORITES,\r\n})\r\n\r\nconst NOW = Date.now() // date in milliseconds\r\n\r\nconst HOUR = 1000 * 60 * 60 // milliseconds * seconds * minutes\r\n\r\nexport const DEFAULT_EVENT = {\r\n  start: NOW,\r\n  end: NOW + HOUR,\r\n  location: '(not provided)',\r\n  name: '(no name)',\r\n  host: '(not provided)',\r\n  category: '(not provided)',\r\n  description: '(no description)',\r\n}\r\n\r\nexport const DEFAULT_CLICKABLE_AREA = {\r\n  location: '(none)',\r\n  shape: 'rect',\r\n  coords: [],\r\n  href: '#',\r\n  alt: '',\r\n}\r\n\r\nexport const DEFAULT_TIMES = {\r\n  days: [],\r\n  interval: 60,\r\n}\r\n\r\nexport const DEFAULT_BREAKPOINT = '50em'\r\n\r\nexport const NOOP = () => {}\r\n","import { NOOP } from './constants'\r\n\r\nexport const getType = val => {\r\n  if (val === null) return 'null'\r\n  if (typeof val === 'object') return val.constructor.name.toLowerCase()\r\n  return typeof val\r\n}\r\n\r\nexport const checkType = (val, type) => {\r\n  const validString = getType(type) === 'string'\r\n  const validArray = getType(type) === 'array' && type.every(t => getType(t) === 'string')\r\n  if (!validString && !validArray) throw '`checkType()` expects either a string or array of strings in the second argument'\r\n  if (validString) return getType(val) === type\r\n  if (validArray) return type.some(t => getType(val) === t)\r\n}\r\n\r\nexport const isObject = obj => checkType(obj, 'object')\r\n\r\nexport const isEmpty = val => checkType(val, ['undefined', 'null'])\r\n\r\nexport const contains = (val, search) => {\r\n  const valIsString = checkType(val, 'string')\r\n  const valIsArray = checkType(val, 'array') && val.every(t => checkType(t, 'string'))\r\n  const validSearch = checkType(search, ['string', 'regexp'])\r\n  if (!valIsArray && !valIsString) throw '`contains()` expects either a string or array of strings in the first argument'\r\n  if (!validSearch) throw '`contains()` expects either a string or regular expression in the second argument'\r\n  if (valIsArray) return val.some(v => v.search(search) !== -1)\r\n  if (valIsString) return val.search(search) !== -1\r\n}\r\n\r\n/**\r\n * Returns a function which gets a field from a given object, unless it's empty,\r\n * in which case it gets that same field from a fallback object.\r\n * @param {object} fallbackObj - The object to be referenced when a field is empty on the original object.\r\n * @param {function} onFallback - An optional callback to run when the fallback is used.\r\n * @param {object} _altTypes - A mapping of fields to acceptable alternative types.\r\n * @returns {function} - Used to get the value from a provided key.\r\n */\r\nexport const useFallback = (fallbackObj, onFallback = NOOP, _altTypes = {}) => {\r\n  if (!isObject(fallbackObj)) throw '`useFallback()` expects an object in the first argument'\r\n  if (!checkType(onFallback, 'function')) throw '`useFallback()` expects a function in the second argument'\r\n  if (!isObject(_altTypes)) throw '`useFallback()` expects an object in the third argument'\r\n  return (obj, key) => {\r\n    const fallbackValue = fallbackObj[key]\r\n    const valid = isObject(obj)\r\n    const value = valid ? obj[key] : null\r\n    const empty = isEmpty(value)\r\n    const type = getType(value)\r\n    const altTypes = _altTypes[key]\r\n    const altTypesArr = checkType(altTypes, 'array') ? altTypes : (checkType(altTypes, 'string') ? [altTypes] : [])\r\n    const mismatch = type !== getType(fallbackValue) && !altTypesArr.some(t => t === type)\r\n    if (!valid || empty || mismatch) {\r\n      const status = !valid ? 'invalid' : (empty ? 'empty' : 'mismatch')\r\n      onFallback(status, key)\r\n      return fallbackValue\r\n    }\r\n    return value\r\n  }\r\n}\r\n\r\n/**\r\n * Returns a function which casts any value to the same structure as the provided object (the type).\r\n * @param {object} type - An object which serves as the (shallow) structure constraints.\r\n * @param {string} name - The optional name of the type for logging purposes.\r\n * @param {object} altTypes - A mapping of fields to acceptable alternative types.\r\n * @returns {function} - Used to cast a provided value to the given type.\r\n */\r\nexport const useCast = (type, name = 'object', altTypes = {}) => {\r\n  if (!isObject(type)) throw 'You may only cast to custom object types'\r\n  return obj => {\r\n    if (!isObject(obj)) return type\r\n    const getValue = useFallback(type, (status, key) => {\r\n      if (status === 'invalid') console.warn(`The provided ${name} is not a valid object.`)\r\n      else if (status === 'mismatch') console.warn(`The \\`${key}\\` field expected type \\`${getType(type[key])}\\` but got \\`${getType(obj[key])}\\`.`)\r\n      else if (status === 'empty') console.warn(`The provided ${name} did not have the \\`${key}\\` field.`)\r\n    }, altTypes)\r\n    return Object.keys(type).reduce((castObj, key) => {\r\n      castObj[key] = getValue(obj, key)\r\n      return castObj\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport const checkFilterType = (filter = {}) => {\r\n  if ('after' in filter && !checkType(filter.after, ['number', 'date'])) throw 'The `after` field expects a number or date'\r\n  if ('before' in filter && !checkType(filter.before, ['number', 'date'])) throw 'The `before` field expects a number or date'\r\n  if ('locations' in filter && !checkType(filter.locations, 'array')) throw 'The `locations` field expects an array'\r\n  if ('search' in filter && !checkType(filter.search, ['string', 'regexp'])) throw 'The `search` field expects a string or regular expression'\r\n  return true // indicate success\r\n}\r\n\r\n/**\r\n * This is the most efficient way to clear HTML, much faster than innerHTML.\r\n * @param {HTMLElement} element - the DOM element we want to empty\r\n */\r\nexport const clearHTML = element => {\r\n  let i = element.childNodes.length\r\n  while (i--) { element.removeChild(element.lastChild) }\r\n}\r\n\r\n/**\r\n * This is the most efficient way to parse HTML, much faster than innerHTML.\r\n *\r\n * @param {string} htmlStr - a string containing only raw HTML\r\n */\r\nexport const parseHTML = htmlStr => {\r\n  const range = document.createRange()\r\n  range.selectNode(document.body) // required in Safari\r\n  return range.createContextualFragment(htmlStr)\r\n}\r\n\r\n/**\r\n * This helps us avoid trailing commas when mapping template literals.\r\n * @param {Array} arr - the array to iterate\r\n * @param {function} callback - the callback for each iteration; should return a string or stringifiable value\r\n */\r\nexport const mapString = (arr, callback) => arr.map(callback).join('')\r\n\r\n/**\r\n * Rounds a date to the nearest given minute\r\n * @param {Date|number|string} _date - The date to round (or anything that can be parsed as a date)\r\n * @param {number} nearestMinute - The nearest minute to round to (15 by default)\r\n */\r\nexport const roundMinutes = (_date, nearestMinute = 15) => {\r\n  const date = new Date(_date)\r\n  const roundedMinutes = Math.round(date.getMinutes() / nearestMinute) * nearestMinute\r\n  date.setMinutes(roundedMinutes)\r\n  return date\r\n}\r\n\r\nexport const WholeNumber = num => Number(num.toFixed())\r\n\r\n/**\r\n * Gets the name of the day based on the index (typically returned by `date.getDay()`)\r\n * @param {number} idx - The index of the day of the week\r\n * @param {boolean} short - Whether to abbreviate the day names or not\r\n * @returns {string} - The name of the day of the week\r\n */\r\nexport const getDay = (idx, short = false) => {\r\n  const days = [\r\n    'Sunday',\r\n    'Monday',\r\n    'Tuesday',\r\n    'Wednesday',\r\n    'Thursday',\r\n    'Friday',\r\n    'Saturday',\r\n  ]\r\n  const shortDays = [\r\n    'Sun',\r\n    'Mon',\r\n    'Tues',\r\n    'Wed',\r\n    'Thurs',\r\n    'Fri',\r\n    'Sat',\r\n  ]\r\n  return short ? shortDays[idx] : days[idx]\r\n}\r\n\r\nexport const getDateInfo = _date => {\r\n  const date = new Date(_date)\r\n  return {\r\n    time: date.toLocaleTimeString('en-US', { timeStyle: 'short' }),\r\n    day: getDay(date.getDay()),\r\n    date: date.toLocaleDateString(),\r\n  }\r\n}\r\n\r\n/**\r\n * Generates a string representing javascript, which can be used in the\r\n * HTML templates of native web components.\r\n * \r\n * EXAMPLE:\r\n * ```js\r\n *   const open = true\r\n *   const html = `<button onclick=\"this.getRootNode().host.openDialog(${open})\">Click me</button>`\r\n * ```\r\n * \r\n * versus\r\n * \r\n * ```js\r\n *   const open = true\r\n *   const html = `<button onclick=\"${runMethod('openDialog', open)}\">Click me</button>`\r\n * ```\r\n * \r\n * @param {string} name - The name of the component method to run\r\n * @param {...*} args - The arguments to be used in the function call (objects will be converted to JSON and encoded as a URI component)\r\n * @returns {string} - A string representing JavaScript code\r\n */\r\nexport const runMethod = (name, ...args) => {\r\n\r\n  const mapType = value => {\r\n\r\n    // preserve keywords that can be used in html attribute handlers\r\n    if (value === 'event' || value === 'this') return value\r\n\r\n    // handle the string rendering of arguments based on their type\r\n    const type = getType(value)\r\n    const map = {\r\n\r\n      // stringify objects to avoid [object Object] and encode to avoid double quote conflicts\r\n      object: `\\`${encodeURIComponent(JSON.stringify(value))}\\``,\r\n\r\n      // wrap strings in backticks in case they're multiline\r\n      string: `\\`${value}\\``,\r\n\r\n      // all other types are rendered without quotes\r\n      default: String(value)\r\n    }\r\n\r\n    return map[type] || map.default\r\n  }\r\n\r\n  return `this.getRootNode().host.${name}(${args.length ? `${[...args].map(mapType)}` : 'event'})`\r\n}\r\n\r\nexport const getEventId = ({ location, name, start: _start }) => {\r\n  const snip = s => s.replace(/[^a-zA-Z0-9]/g, '')\r\n  const date = new Date(_start)\r\n  const start = `${date.toLocaleDateString()}-${date.toLocaleTimeString()}`\r\n  return `${snip(location)}-${snip(name)}-${snip(start)}`\r\n}\r\n\r\nexport const search = (_input, _text) => {\r\n\r\n  // * replace variation characters (for example, é becomes e)\r\n  // * remove anything that isn't alphanumeric (including spaces)\r\n  //     ^ this lets \"megaman\" match \"mega man\"\r\n  // * use lower case for case-insensitive search\r\n  const formatForSimilarMatch = str => str\r\n    ?.normalize('NFD')\r\n    .replace(/\\p{Diacritic}/gu, '')\r\n    .replace(/[^a-zA-Z0-9]/g, '')\r\n    .toLowerCase()\r\n\r\n  // first try matching the entire query\r\n  const input = formatForSimilarMatch(_input)\r\n  const text = formatForSimilarMatch(_text)\r\n  if (text.search(input) !== -1) return true\r\n  if (input.search(text) !== -1) return true\r\n\r\n  // if that fails, try each word\r\n  return _input.split(/\\s+/g).some(input =>\r\n    text.search(formatForSimilarMatch(input)) !== -1)\r\n}\r\n\r\nexport const trim = str => str.length > 40 ? str.slice(0, 36) + '...' : str\r\n\r\nexport const getMarkerCoords = (marker, clickableAreas) => {\r\n  const clickableArea = clickableAreas.find(({ location }) => marker === location)\r\n  const allX = clickableArea.coords.filter((_, idx) => idx % 2 === 0)\r\n  const allY = clickableArea.coords.filter((_, idx) => idx % 2 !== 0)\r\n  const minX = Math.min(...allX)\r\n  const minY = Math.min(...allY)\r\n  const maxX = Math.max(...allX)\r\n  const maxY = Math.max(...allY)\r\n  const x = (minX + maxX) / 2\r\n  const y = (minY + maxY) / 2\r\n  return [x, y]\r\n}\r\n\r\nexport const getLastTimeInThreshold = (currentDate, allDates, threshold = '12:00 AM') => {\r\n  const lastInCurrentDay = Math.max(...allDates.filter(t => t.getDate() === currentDate.getDate()))\r\n  if (threshold === '12:00 AM') return new Date(lastInCurrentDay)\r\n  const nextDate = new Date(currentDate)\r\n  nextDate.setDate(currentDate.getDate() + 1)\r\n  nextDate.setTime(new Date(`${nextDate.toLocaleDateString()} ${threshold}`).getTime())\r\n  const allTimesNextDay = allDates.filter(t => t.getDate() === nextDate.getDate())\r\n  const lastInNextDay = Math.max(...allTimesNextDay.filter(t => t.getTime() <= nextDate.getTime()))\r\n  return new Date(lastInNextDay > 0 ? lastInNextDay : lastInCurrentDay)\r\n}\r\n","import { DEFAULT_ADD_FAVORITE, DEFAULT_REMOVE_FAVORITE, DEFAULT_GET_FAVORITES, DEFAULT_GUIDE } from './constants'\r\nimport { checkType, roundMinutes, getDay, getLastTimeInThreshold } from './utilities'\r\n\r\nexport const state = {\r\n\r\n  // utilities for synchronous actions after loading state\r\n  _hasFetched: false,\r\n  get hasFetched() { return this._hasFetched },\r\n  set hasFetched(bool) {\r\n    this._hasFetched = bool\r\n    if (bool === false) return false\r\n    this.fetchQueue.forEach(resolve => resolve())\r\n    return true\r\n  },\r\n  fetchQueue: [],\r\n  waitForFetch() {\r\n    return new Promise(resolve => {\r\n      if (this.hasFetched) resolve()\r\n      else this.fetchQueue.push(() => resolve())\r\n    })\r\n  },\r\n\r\n  // default guide\r\n  guide: DEFAULT_GUIDE,\r\n\r\n  // default favorite functionality\r\n  addFavorite: DEFAULT_ADD_FAVORITE,\r\n  removeFavorite: DEFAULT_REMOVE_FAVORITE,\r\n  getFavorites: DEFAULT_GET_FAVORITES,\r\n\r\n  // get locations and add any missed from events dynamically\r\n  get locations() {\r\n    const locations = this.guide?.locations ?? []\r\n    const events = this.guide?.events ?? []\r\n    return [...events.reduce((locations, event) => {\r\n      if (!checkType(event, 'object')) return locations\r\n      if (!checkType(event.location, 'string')) return locations\r\n      if (!locations.has(event.location)) locations.add(event.location)\r\n      return locations\r\n    }, new Set(locations))]\r\n  },\r\n\r\n  // get times from events dynamically\r\n  get times() {\r\n    const events = this.guide?.events ?? []\r\n    const threshold = this.guide?.rollOverTime ?? '12:00 AM'\r\n    const allTimes = [...events.reduce((times, event) => {\r\n      if (!checkType(event, 'object')) return times\r\n      if (!checkType(event.start, ['number', 'date'])) return times\r\n      if (!checkType(event.end, ['number', 'date'])) return times\r\n      times.add(roundMinutes(event.start))\r\n      times.add(roundMinutes(event.end))\r\n      return times\r\n    }, new Set())].sort()\r\n    const earliestTime = new Date(Math.min(...allTimes))\r\n    const latestTime = new Date(Math.max(...allTimes))\r\n    const interval = allTimes.reduce((interval, date) => {\r\n      if (interval !== 15) {\r\n        const minutes = date.getMinutes()\r\n        if (minutes === 30) interval = 30\r\n        if (minutes === 15 || minutes === 45) interval = 15\r\n      }\r\n      return interval\r\n    }, 0)\r\n    const getTimeObject = date => ({\r\n      date,\r\n      timeString: date.toLocaleTimeString('en-US', { timeStyle: 'short' }),\r\n    })\r\n    const getFullDay = time => `${getDay(time.getDay())} ${time.toLocaleDateString()}`\r\n    let days = { [getFullDay(earliestTime)]: [getTimeObject(earliestTime)] }\r\n    let prevTime = earliestTime\r\n    let currentDay = getFullDay(prevTime)\r\n    while (prevTime < latestTime) {\r\n      const lastTimeInDay = getLastTimeInThreshold(prevTime, allTimes, threshold)\r\n      let currentTime = null\r\n      if (Number(lastTimeInDay) === Number(prevTime)) {\r\n        currentTime = new Date(allTimes.find(time => time > prevTime))\r\n        currentDay = getFullDay(currentTime)\r\n        days[currentDay] = [getTimeObject(currentTime)]\r\n      } else {\r\n        currentTime = new Date(prevTime)\r\n        const intervalInMs = interval * 1000 * 60\r\n        currentTime.setTime(currentTime.getTime() + intervalInMs)\r\n        days[currentDay].push(getTimeObject(currentTime))\r\n      }\r\n      prevTime = currentTime\r\n    }\r\n    return {\r\n      days,\r\n      interval,\r\n    }\r\n  },\r\n}\r\n","import {\r\n  DEFAULT_FETCH_DATA,\r\n  DEFAULT_EVENT,\r\n  DEFAULT_FLOOR_PLAN,\r\n  DEFAULT_CLICKABLE_AREA,\r\n} from './constants'\r\nimport {\r\n  useCast,\r\n  checkType,\r\n  checkFilterType,\r\n  isObject,\r\n} from './utilities'\r\nimport { state as INITIAL_STATE } from './state'\r\n\r\n// share state in the global context to avoid issues\r\n// with imports between two separate bundles.\r\nconst getState = () => {\r\n  globalThis.__thunderEvents__sharedState =\r\n    globalThis.__thunderEvents__sharedState // existing state\r\n    ?? INITIAL_STATE // initialize if none exists already\r\n  return globalThis.__thunderEvents__sharedState\r\n}\r\n\r\nconst init = async (init = DEFAULT_FETCH_DATA) => {\r\n  const state = getState()\r\n  const data = await init()\r\n  if (!isObject(data)) throw '`init()` must return an object'\r\n  const { guide } = data\r\n  if (!isObject(guide)) throw 'The `guide` field expects an object'\r\n  if ('events' in guide) {\r\n    if (!checkType(guide.events, 'array')) throw 'The `guide.events` field expects an array'\r\n    const castEvent = useCast(DEFAULT_EVENT, 'event', { start: 'date', end: 'date' })\r\n    state.guide.events = guide.events.map(castEvent)\r\n  }\r\n  if ('floorPlan' in guide) {\r\n    if (!isObject(guide.floorPlan)) throw 'The `guide.floorPlan` field expects an object'\r\n    const castFloorPlan = useCast(DEFAULT_FLOOR_PLAN, 'floor plan')\r\n    const castClickableArea = useCast(DEFAULT_CLICKABLE_AREA, 'clickable area')\r\n    const floorPlan = castFloorPlan(guide.floorPlan)\r\n    state.guide.floorPlan = {\r\n      ...floorPlan,\r\n      clickableAreas: floorPlan.clickableAreas.map(castClickableArea),\r\n    }\r\n  }\r\n  if ('locations' in guide) {\r\n    if (!checkType(guide.events, 'array')) throw 'The `guide.locations` field expects an array'\r\n    state.guide.locations = guide.locations.map(loc => String(loc))\r\n  }\r\n  if ('rollOverTime' in guide) {\r\n    if (!checkType(guide.rollOverTime, 'string')) throw 'The `guide.rollOverTime` field expects a string'\r\n    const timeRegex = /(^((1[0-2])|0?[1-9]):\\d{2} (AM|PM)$)|(^(([0-1]?[0-9])|(2[0-3])):\\d{2}$)/\r\n    if (!timeRegex.test(guide.rollOverTime)) throw 'The `guide.rollOverTime` field expects the string in time format.  Example: \"1:00 PM\" for 12-hours or \"13:00\" for 24-hours'\r\n    state.guide.rollOverTime = guide.rollOverTime\r\n  }\r\n  if ('addFavorite' in data) {\r\n    if (!checkType(data.addFavorite, 'function')) throw 'The `addFavorite` field expects a function'\r\n    state.addFavorite = data.addFavorite\r\n  }\r\n  if ('removeFavorite' in data) {\r\n    if (!checkType(data.removeFavorite, 'function')) throw 'The `removeFavorite` field expects a function'\r\n    state.removeFavorite = data.removeFavorite\r\n  }\r\n  if ('getFavorites' in data) {\r\n    if (!checkType(data.getFavorites, 'function')) throw 'The `getFavorites` field expects a function'\r\n    state.getFavorites = data.getFavorites\r\n  }\r\n  state.hasFetched = true\r\n}\r\n\r\nconst getEvents = async (_filters = {}) => {\r\n  const state = getState()\r\n  await state.waitForFetch()\r\n  if (!isObject(_filters)) throw '`getEvents()` expects an object in the first argument'\r\n  const { include: _include = {}, exclude: _exclude = {} } = _filters\r\n  checkFilterType(_include) // throws if invalid\r\n  checkFilterType(_exclude) // throws if invalid\r\n  const filters = {\r\n    ..._filters,\r\n    include: {\r\n      ..._include,\r\n      after: _include.after ? Number(_include.after) : 0,\r\n      before: _include.before ? Number(_include.before) : Infinity,\r\n    },\r\n    exclude: {\r\n      ..._exclude,\r\n      after: _exclude.after ? Number(_exclude.after) : Infinity,\r\n      before: _exclude.before ? Number(_exclude.before) : 0,\r\n    },\r\n  }\r\n  const { include = {}, exclude = {} } = filters\r\n  return state.guide.events.filter(event => {\r\n    \r\n    // filter within time range\r\n    if (event.start < include.after) return false\r\n    if (event.start > exclude.after) return false\r\n    if (event.end > include.before) return false\r\n    if (event.end < exclude.before) return false\r\n    \r\n    // filter by location\r\n    if ('locations' in include && !contains(include.locations, event.location)) return false\r\n    if ('locations' in exclude && contains(exclude.locations, event.location)) return false\r\n    \r\n    // filter by name\r\n    if ('search' in include && !contains(event.name, include.search)) return false\r\n    if ('search' in exclude && contains(event.name, exclude.search)) return false\r\n\r\n    // if all previous checks pass, keep this event in the array\r\n    return true\r\n  })\r\n}\r\n\r\nconst getLocations = async () => {\r\n  const state = getState()\r\n  await state.waitForFetch()\r\n  return state.locations\r\n}\r\n\r\nconst getTimes = async () => {\r\n  const state = getState()\r\n  await state.waitForFetch()\r\n  return state.times\r\n}\r\n\r\nconst getFloorPlan = async () => {\r\n  const state = getState()\r\n  await state.waitForFetch()\r\n  return state.guide.floorPlan\r\n}\r\n\r\nconst addFavorite = async event => {\r\n  const state = getState()\r\n  const favorites = await state.addFavorite(event)\r\n  return favorites\r\n}\r\n\r\nconst removeFavorite = async event => {\r\n  const state = getState()\r\n  const favorites = await state.removeFavorite(event)\r\n  return favorites\r\n}\r\n\r\nconst getFavorites = async () => {\r\n  const state = getState()\r\n  const favorites = await state.getFavorites()\r\n  return favorites\r\n}\r\n\r\nexport {\r\n  init,\r\n  addFavorite,\r\n  removeFavorite,\r\n  getFavorites,\r\n  getEvents,\r\n  getLocations,\r\n  getTimes,\r\n  getFloorPlan,\r\n}\r\n","import { WholeNumber } from '../../utilities'\r\n\r\n// converts dates to actual `Date()` objects\r\nexport const getActiveEvent = event => ({\r\n  ...event,\r\n  start: new Date(event.start),\r\n  end: new Date(event.end),\r\n})\r\n\r\n\r\n// gets all data needed for one cell, so the logic doesn't clutter the template\r\nexport const getCellData = ({ events, spanState, date, interval, _location, currentTime }) => {\r\n\r\n  // find an event starting at this time\r\n  const _event = events.find(e =>\r\n    Number(e.start) === Number(date)\r\n    && e.location === _location\r\n  )\r\n\r\n  // handle events that already started before the start time\r\n  const event = !_event\r\n    ? events.find(e =>\r\n        Number(e.end) > Number(date)\r\n        && Number(e.start) < Number(currentTime)\r\n        && e.location === _location\r\n      )\r\n    : _event\r\n\r\n  const hasStarted = event ? event.start < currentTime : false\r\n  const eventName = event ? event.name : ''\r\n  const cellType = event ? 'data' : 'data-empty'\r\n  const getStart = event => hasStarted ? currentTime : event.start\r\n  const duration = event ? WholeNumber((event.end - getStart(event)) / 1000 / 60) : 0\r\n  const span = duration ? WholeNumber(duration / interval) : 1\r\n  const blank = spanState[_location] > 0\r\n\r\n  // handle spanState to prevent extra columns\r\n  if (blank) --spanState[_location]\r\n  else if (span > 1) spanState[_location] = span - 1\r\n\r\n  // return all necessary information included in the template\r\n  return { eventName, cellType, span, blank, event, hasStarted }\r\n}\r\n","export default /* css */`\ndialog {\n  position: absolute;\n  left: 0; right: 0;\n  width: -moz-fit-content;\n  width: -webkit-fit-content;\n  width: fit-content;\n  height: -moz-fit-content;\n  height: -webkit-fit-content;\n  height: fit-content;\n  margin: auto;\n  border: solid;\n  padding: 1em;\n  background: white;\n  color: black;\n  display: block;\n}\n\ndialog:not([open]) {\n  display: none;\n}\n\ndialog + .backdrop {\n  position: fixed;\n  top: 0; right: 0; bottom: 0; left: 0;\n  background: rgba(0,0,0,0.1);\n}\n\n._dialog_overlay {\n  position: fixed;\n  top: 0; right: 0; bottom: 0; left: 0;\n}\n\ndialog.fixed {\n  position: fixed;\n  top: 50%;\n  transform: translate(0, -50%);\n}\n`\n","export default /* css */`\r\n.pg-dialog {\r\n  background-color: var(--color-header);\r\n  bottom: 0;\r\n  border: 0 solid;\r\n  border-radius: 0.5rem;\r\n  box-shadow: 0 0 1rem rgba(0, 0, 0, 0.5);\r\n  box-sizing: border-box;\r\n  color: var(--color-header-content);\r\n  height: max-content;\r\n  left: 0;\r\n  margin: auto;\r\n  max-height: 100vh;\r\n  max-width: 40rem;\r\n  min-height: 40rem;\r\n  position: fixed;\r\n  right: 0;\r\n  top: 0;\r\n  width: calc(100% - 0.5rem);\r\n  z-index: 2;\r\n}\r\n.pg-dialog + .backdrop {\r\n  background-color: rgba(0, 0, 0, 0.8);\r\n}\r\n/* ::backdrop must be kept separate because of safari */\r\n.pg-dialog::backdrop {\r\n  background-color: rgba(0, 0, 0, 0.8);\r\n}\r\n.pg-dialog-header {\r\n  display: grid;\r\n  grid-template-columns: 1fr auto;\r\n}\r\n.pg-dialog-title {\r\n  margin: 0;\r\n}\r\n.pg-dialog-details {\r\n  padding-top: 1rem;\r\n}\r\n.pg-dialog-select {\r\n  border: 0 solid;\r\n  border-radius: 0.3rem;\r\n  padding: 0.5rem;\r\n}\r\n.pg-dialog-close {\r\n  align-items: center;\r\n  background-color: var(--color-header-content);\r\n  border: 0 solid;\r\n  border-radius: 50%;\r\n  color: var(--color-header);\r\n  cursor: pointer;\r\n  display: flex;\r\n  height: 2rem;\r\n  justify-content: center;\r\n  width: 2rem;\r\n}\r\n.pg-dialog-menu {\r\n  display: grid;\r\n  gap: 0.5rem;\r\n  margin: 0 auto;\r\n  max-width: 30rem;\r\n  padding: 2rem 2rem 0;\r\n}\r\n.pg-dialog-menu-title {\r\n  width: max-content;\r\n  margin: 0 auto;\r\n}\r\n.pg-dialog-menu-item {\r\n  align-items: center;\r\n  background-color: var(--color-cell);\r\n  border: none;\r\n  box-shadow: 0 0 1.2rem rgba(0, 0, 0, 0.5);\r\n  color: var(--color-content);\r\n  cursor: pointer;\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  justify-content: center;\r\n  padding: 1rem 0.5rem;\r\n}\r\n.pg-dialog-menu-item--input,\r\n.pg-dialog-menu-input {\r\n  cursor: text;\r\n}\r\n.pg-dialog-menu-input {\r\n  background-color: transparent;\r\n  border: none;\r\n}\r\n.pg-dialog-menu-input--time {\r\n  width: 10.2rem;\r\n}\r\n.pg-dialog-menu-special-item {\r\n  display: grid;\r\n  gap: 0.5rem;\r\n  grid-template-columns: 2fr 1fr;\r\n}\r\n.pg-dialog-body {\r\n  display: grid;\r\n  grid-auto-rows: auto;\r\n  grid-template-rows: auto minmax(0, 1fr);\r\n  height: 100%;\r\n  max-height: calc(100vh - 2rem);\r\n  min-height: 38rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n.pg-dialog-body:before,\r\n.pg-dialog-body:after {\r\n  content: '\\\\02771';\r\n  color: var(--color-header);\r\n  display: inline-block;\r\n  font-size: 3rem;\r\n  height: 3rem;\r\n  left: 0;\r\n  line-height: 3rem;\r\n  margin: auto;\r\n  position: absolute;\r\n  right: 0;\r\n  width: 3rem;\r\n}\r\n.pg-dialog-body:before {\r\n  top: 1rem;\r\n  transform: rotate(-90deg);\r\n}\r\n.pg-dialog-body:after {\r\n  bottom: -1.8rem;\r\n  transform: rotate(90deg);\r\n}\r\n.pg-dialog-content {\r\n  overflow: auto;\r\n  padding-bottom: 2rem;\r\n}\r\n.pg-dialog-content--text-container,\r\n.pg-dialog-footer {\r\n  background-color: var(--color-cell);\r\n  border: 0 solid;\r\n  border-radius: 0.5rem;\r\n  color: var(--color-content);\r\n  margin: 2rem 0 0;\r\n  text-align: center;\r\n}\r\n.pg-dialog-content--text-container:after {\r\n  background-image: linear-gradient(transparent, var(--color-cell) 90%);\r\n  bottom: -2rem;\r\n  content: '';\r\n  display: block;\r\n  height: 4rem;\r\n  left: 0;\r\n  position: sticky;\r\n  width: 100%;\r\n}\r\n.pg-dialog-paragraph {\r\n  margin: 0;\r\n  padding: 1rem;\r\n}\r\n.pg-dialog-footer {\r\n  padding: 1rem;\r\n}\r\n`\r\n","export default /* css */`\r\n:host {\r\n\r\n  /* general fonts */\r\n  --font: inherit;\r\n  --font-secondary: var(--font);\r\n\r\n  /* specific fonts */\r\n  --font-header: var(--font);\r\n  --font-content: var(--font-secondary);\r\n  --font-column-header: var(--font-header);\r\n  --font-row-header: var(--font-header);\r\n\r\n  /* padding */\r\n  --padding-cell: 1rem 2rem;\r\n  --padding-header: var(--padding-cell);\r\n  --padding-column-header: var(--padding-header);\r\n  --padding-row-header: var(--padding-header);\r\n\r\n  /* general colors */\r\n  --color-primary: lightsteelblue;\r\n  --color-primary-contrast: black;\r\n  --color-secondary: steelblue;\r\n  --color-secondary-contrast: white;\r\n  --color-tertiary: midnightblue;\r\n  --color-tertiary-contrast: white;\r\n\r\n  /* specific colors */\r\n  --color-background: var(--color-tertiary);\r\n  --color-foreground: var(--color-tertiary-contrast);\r\n  --color-cell: var(--color-primary);\r\n  --color-empty: transparent;\r\n  --color-content: var(--color-primary-contrast);\r\n  --color-header: var(--color-secondary);\r\n  --color-header-content: var(--color-secondary-contrast);\r\n  --color-column-header: var(--color-header);\r\n  --color-column-header-content: var(--color-header-content);\r\n  --color-row-header: var(--color-header);\r\n  --color-row-header-content: var(--color-header-content);\r\n  --color-corner: var(--color-header);\r\n  --color-corner-content: var(--color-header-content);\r\n\r\n  /* loading spinner */\r\n  --color-loading-primary: var(--color-primary);\r\n  --color-loading-secondary: var(--color-secondary);\r\n  --size-loader: 5rem;\r\n}\r\n\r\n/* remove browser defaults so fonts can be fully customized */\r\n:host, button, input {\r\n  font-family: var(--font-secondary);\r\n  font-size: inherit;\r\n}\r\n`\r\n","export default /* css */`\r\n.pg-loading {\r\n  height: 10rem;\r\n  width: 100%;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n.pg-loading:before,\r\n.pg-loading:after {\r\n  bottom: 0;\r\n  border-radius: 50%;\r\n  content: '';\r\n  display: block;\r\n  left: 0;\r\n  margin: auto;\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n  z-index: 2;\r\n}\r\n@keyframes spin {\r\n  from { transform: rotate(0deg); }\r\n  to { transform: rotate(359deg); }\r\n}\r\n.pg-loading:before {\r\n  animation: spin 1s linear infinite;\r\n  background-image: conic-gradient(var(--color-loading-primary), var(--color-loading-secondary));\r\n  border: 0.4rem solid var(--color-loading-primary);\r\n  height: var(--size-loader);\r\n  width: var(--size-loader);\r\n  z-index: 1;\r\n}\r\n.pg-loading:after {\r\n  background-color: var(--color-loading-primary);\r\n  border: 0 solid;\r\n  height: calc(var(--size-loader) - 1rem);\r\n  width: calc(var(--size-loader) - 1rem);\r\n  z-index: 2;\r\n}\r\n`\r\n","export default /* css */`\r\n.pg-cell-wrapper--column-header,\r\n.pg-cell-wrapper--data,\r\n.pg-cell-wrapper--data-empty {\r\n  display: none;\r\n}\r\n.pg-cell-wrapper--column-header-active,\r\n.pg-cell-wrapper--column-header-time,\r\n.pg-cell-wrapper--data-active,\r\n.pg-cell-wrapper--data-time,\r\n.pg-cell-wrapper--data-favorite,\r\n.pg-cell-wrapper--data-search,\r\n.pg-cell-wrapper--data-empty-time,\r\n.pg-cell-wrapper--data-empty-active {\r\n  filter: none;\r\n  display: revert;\r\n  min-width: 0;\r\n}\r\n.pg-cell--data {\r\n  margin: 0;\r\n}\r\n.pg-cell--data-search,\r\n.pg-cell--data-favorite {\r\n  margin: auto;\r\n}\r\n.pg-floor-plan-header {\r\n  grid-template-areas:\r\n    \"options title\"\r\n    \"view view\";\r\n}\r\n.pg-floor-plan-menu-section {\r\n  grid-template-columns: auto 1fr;\r\n  gap: 1rem;\r\n}\r\n.pg-cell-wrapper--corner,\r\n.pg-cell-wrapper--row-header-time,\r\n.pg-cell-wrapper--row-header-time:after {\r\n  transition: all 0.5s;\r\n}\r\n.pg-table-wrapper--scrolled .pg-cell-wrapper--row-header-time {\r\n  cursor: pointer;\r\n}\r\n.pg-table-wrapper--scrolled .pg-cell-wrapper--row-header-time:after {\r\n  bottom: 0;\r\n  content: '\\\\25C0';\r\n  display: inline-block;\r\n  font-size: 1rem;\r\n  height: 1rem;\r\n  margin: auto;\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n}\r\n.pg-table-wrapper--scrolled .pg-cell-wrapper--corner-collapsed,\r\n.pg-table-wrapper--scrolled .pg-cell-wrapper--row-header-collapsed {\r\n  left: -9.5rem;\r\n}\r\n.pg-table-wrapper--scrolled .pg-cell-wrapper--row-header-collapsed:after {\r\n  transform: rotate(180deg);\r\n}\r\n.pg-table-wrapper--scrolled .pg-cell-wrapper--row-header-collapsed .pg-cell--row-header {\r\n  pointer-events: none;\r\n}\r\n.pg-table-wrapper--scrolled .pg-cell-wrapper--corner-collapsed {\r\n  padding-right: 0;\r\n}\r\n.pg-table-wrapper--scrolled .pg-cell-wrapper--corner-collapsed .pg-corner-text {\r\n  order: -1;\r\n}\r\n`\r\n","export default /* css */`\r\n.pg-search-bar {\r\n  background-color: var(--color-background);\r\n  display: grid;\r\n  gap: 0.2rem;\r\n  grid-template-columns: 1fr auto;\r\n  margin: 0;\r\n  padding: 0.2rem 0.2rem 0;\r\n}\r\n.pg-search-icon {\r\n  border: 0.2rem solid;\r\n  border-radius: 50%;\r\n  display: block;\r\n  height: 0.8rem;\r\n  position: relative;\r\n  transform: translate(-0.15rem, -0.1rem);\r\n  width: 0.8rem;\r\n}\r\n.pg-search-icon:after {\r\n  background-color: var(--color-content);\r\n  bottom: -0.2rem;\r\n  content: '';\r\n  display: block;\r\n  height: 0.2rem;\r\n  width: 0.5rem;\r\n  position: absolute;\r\n  right: -0.4rem;\r\n  transform: rotate(45deg);\r\n}\r\n.pg-search-input,\r\n.pg-search-button {\r\n  align-items: center;\r\n  background-color: var(--color-cell);\r\n  border: none;\r\n  box-shadow: 0 0 1.2rem rgba(0, 0, 0, 0.5);\r\n  color: var(--color-content);\r\n  cursor: pointer;\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  justify-content: center;\r\n  padding: 1rem 0.5rem;\r\n}\r\n.pg-search-input {\r\n  cursor: text;\r\n}\r\n.pg-search-input,\r\n.pg-search-button {\r\n  padding: 0.5rem 1rem;\r\n}\r\n.pg-search-input {\r\n  min-width: 0;\r\n}\r\n`\r\n","export default /* css */`\r\n.pg-table-wrapper {\r\n  background-color: var(--color-background);\r\n  display: grid;\r\n  height: 60rem;\r\n  max-height: calc(100vh - 6rem);\r\n  max-width: 100%;\r\n  margin-bottom: 1rem;\r\n  overflow: auto;\r\n  position: relative;\r\n}\r\n.pg-table {\r\n  width: 100%;\r\n}\r\n.pg-cell-wrapper {\r\n  background-color: var(--color-cell);\r\n  font-family: var(--font-content);\r\n  padding: var(--padding-cell);\r\n  position: relative;\r\n  text-align: center;\r\n}\r\n.pg-cell-wrapper--overflow:before {\r\n  content: '\\\\2039';\r\n  font-size: 2.5rem;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  margin: auto;\r\n  line-height: 2.5rem;\r\n}\r\n.pg-cell-wrapper--row-header,\r\n.pg-cell-wrapper--corner {\r\n  border-right: 0.1rem solid var(--color-background);\r\n  left: 0;\r\n  position: sticky;\r\n  width: 0; /* columns size to the minimum width */\r\n  z-index: 1;\r\n}\r\n.pg-cell-wrapper--corner {\r\n  background-color: var(--color-corner);\r\n  border-bottom: 0.1rem solid var(--color-background);\r\n  color: var(--color-corner-content);\r\n  cursor: pointer;\r\n  top: 0;\r\n  z-index: 2;\r\n}\r\n.pg-cell-wrapper--row-header {\r\n  background-color: var(--color-row-header);\r\n  box-shadow: 0 0.2rem 0 var(--color-background);\r\n  color: var(--color-row-header-content);\r\n  font-family: var(--font-row-header);\r\n  padding: var(--padding-row-header);\r\n  text-align: right;\r\n}\r\n.pg-cell--corner,\r\n.pg-cell--row-header {\r\n  width: 9rem;\r\n}\r\n.pg-cell--row-header {\r\n  cursor: pointer;\r\n  user-select: none;\r\n}\r\n.pg-cell-wrapper--row-header .pg-cell {\r\n  align-items: center;\r\n  display: grid;\r\n  gap: 0.5rem;\r\n  grid-template-columns: auto 1fr;\r\n}\r\n.pg-cell--data {\r\n  position: sticky;\r\n  left: 14rem;\r\n  margin: auto;\r\n  width: fit-content;\r\n  z-index: 0;\r\n  top: 8rem;\r\n}\r\n.pg-cell--data-search,\r\n.pg-cell--data-favorite {\r\n  display: grid;\r\n  left: 0;\r\n  justify-content: center;\r\n  margin: auto;\r\n}\r\n.pg-search-result-name {\r\n  font-weight: bold;\r\n  padding-bottom: 0.8rem;\r\n}\r\n.pg-inline-text {\r\n  display: inline-block;\r\n}\r\n.pg-cell--corner {\r\n  align-items: center;\r\n  display: grid;\r\n  gap: 0.5rem;\r\n  grid-template-columns: auto auto;\r\n  justify-content: center;\r\n  margin: auto;\r\n}\r\n.pg-cell-wrapper--column-header {\r\n  background-color: var(--color-column-header);\r\n  border-bottom: 0.1rem solid var(--color-background);\r\n  color: var(--color-column-header-content);\r\n  font-family: var(--font-column-header);\r\n  padding: var(--padding-column-header);\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 1;\r\n}\r\n.pg-cell-wrapper--column-header-location {\r\n  cursor: pointer;\r\n}\r\n.pg-cell-wrapper--column-header-active-location,\r\n.pg-cell-wrapper--column-header-active-time {\r\n  filter: brightness(1.3);\r\n}\r\n.pg-cell-wrapper--column-header-active-time > .pg-cell {\r\n  grid-template-columns: 1fr;\r\n  gap: 0;\r\n}\r\n.pg-cell--column-header {\r\n  align-items: center;\r\n  display: grid;\r\n  gap: 1rem;\r\n  grid-template-columns: auto 1fr;\r\n  justify-content: center;\r\n  min-width: 8rem;\r\n}\r\n.pg-cell-wrapper--data {\r\n  cursor: pointer;\r\n}\r\n.pg-cell-wrapper--data-empty {\r\n  background-color: var(--color-empty);\r\n}\r\n.pg-time {\r\n  display: inline-block;\r\n  font-weight: bold;\r\n}\r\n`\r\n","export default /* css */`\r\n.pg-favorite-icon {\r\n  font-size: 2rem;\r\n  font-style: normal;\r\n  line-height: 2rem;\r\n}\r\n.pg-more-icon {\r\n  background-color: var(--color-header);\r\n  border: 0.8rem solid var(--color-header-content);\r\n  display: block;\r\n  position: relative;\r\n  vertical-align: middle;\r\n  z-index: 0;\r\n}\r\n.pg-more-icon,\r\n.pg-more-icon:before,\r\n.pg-more-icon:after {\r\n  border-radius: 50%;\r\n  height: 0.4rem;\r\n  width: 0.4rem;\r\n}\r\n.pg-more-icon:before,\r\n.pg-more-icon:after {\r\n  background-color: var(--color-header);\r\n  border: 0 solid;\r\n  content: '';\r\n  display: block;\r\n  position: absolute;\r\n  top: 0;\r\n  z-index: 1;\r\n}\r\n.pg-more-icon:before {\r\n  left: -0.5rem;\r\n}\r\n.pg-more-icon:after {\r\n  right: -0.5rem;\r\n}\r\n.pg-close-icon {\r\n  height: 100%;\r\n  display: block;\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n.pg-close-icon:before,\r\n.pg-close-icon:after {\r\n  background-color: var(--color-header);\r\n  bottom: 0;\r\n  content: '';\r\n  display: block;\r\n  height: 1.3rem;\r\n  left: 0;\r\n  margin: auto;\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n  width: 0.2rem;\r\n}\r\n.pg-close-icon:before {\r\n  transform: rotate(45deg);\r\n}\r\n.pg-close-icon:after {\r\n  transform: rotate(-45deg);\r\n}\r\n.pg-map-icon {\r\n  --color: var(--color-header-content);\r\n  display: inline-block;\r\n  height: 1.5rem;\r\n  width: 1.5rem;\r\n  margin-bottom: 0.5rem;\r\n  position: relative;\r\n  vertical-align: middle;\r\n  z-index: 0;\r\n}\r\n.pg-map-icon:before {\r\n  border: 0.37rem solid var(--color);\r\n  border-radius: 50%;\r\n  content: '';\r\n  display: block;\r\n  height: 0.75rem;\r\n  left: 0;\r\n  position: absolute;\r\n  top: 0;\r\n  width: 0.75rem;\r\n  z-index: 1;\r\n}\r\n.pg-map-icon:after {\r\n  border: 0.5rem solid var(--color);\r\n  border-top-color: transparent;\r\n  border-left-color: transparent;\r\n  border-radius: 20%;\r\n  bottom: 0;\r\n  content: '';\r\n  display: block;\r\n  left: 0;\r\n  margin: auto;\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n  transform: translateY(0.3rem) scaleX(0.7) rotate(45deg);\r\n  z-index: 0;\r\n}\r\n`\r\n","export default /* css */`\r\n.pg-floor-plan-wrapper {\r\n  background-color: var(--color-background);\r\n  margin-bottom: 1rem;\r\n  height: 60rem;\r\n  max-height: calc(100vh - 6rem);\r\n  overflow: auto;\r\n  position: relative;\r\n}\r\n.pg-floor-plan-header {\r\n  align-items: center;\r\n  background-color: var(--color-header);\r\n  border: 0.2rem solid var(--color-background);\r\n  display: grid;\r\n  grid-template-areas: \"options view title\";\r\n  grid-template-columns: auto 1fr auto;\r\n  position: sticky;\r\n  right: 0;\r\n  top: 0;\r\n  z-index: 1;\r\n}\r\n.pg-floor-plan-menu-button {\r\n  border: 0 solid;\r\n  background-color: transparent;\r\n  cursor: pointer;\r\n  padding: 1rem 1.3rem;\r\n}\r\n.pg-floor-plan-title {\r\n  color: var(--color-header-content);\r\n  margin: 0;\r\n  padding: 1rem;\r\n  text-align: right;\r\n}\r\n.pg-floor-plan-container {\r\n  overflow: auto;\r\n  padding: 0rem 0.2rem 0.2rem;\r\n  position: relative;\r\n}\r\n.pg-floor-plan-image-wrapper {\r\n  margin: 0 auto;\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n.pg-floor-plan-image {\r\n  display: block;\r\n  margin: 0 auto;\r\n  object-fit: contain;\r\n  width: 100%;\r\n  height: auto;\r\n}\r\n.pg-floor-plan-image-wrapper--interactive {\r\n  width: min-content;\r\n}\r\n.pg-floor-plan-image--interactive {\r\n  width: unset;\r\n  height: unset;\r\n}\r\n.pg-overlay-image {\r\n  display: block;\r\n  margin: 0 auto;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n}\r\n.pg-floor-plan-marker {\r\n  --x: 0;\r\n  --y: 0;\r\n  align-items: center;\r\n  background-image: radial-gradient(white 25%, rgba(255, 0, 0, 0.2) 25%);\r\n  border: 0.1rem solid red;\r\n  border-radius: 50%;\r\n  display: grid;\r\n  left: var(--x);\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: var(--y);\r\n  transform: translate(-50%, -50%);\r\n  height: 8rem;\r\n  justify-items: center;\r\n  width: 8rem;\r\n}\r\n.pg-floor-plan-marker > .pg-map-icon {\r\n  --color: red;\r\n}\r\n.pg-floor-plan-menu {\r\n  align-items: center;\r\n  color: var(--color-header-content);\r\n  display: contents;\r\n  margin: 0;\r\n}\r\n.pg-floor-plan-menu-section {\r\n  align-items: center;\r\n  display: grid;\r\n  gap: 0.5rem;\r\n  grid-area: view;\r\n  justify-content: center;\r\n  left: 0;\r\n  margin: 0 auto;\r\n  padding: 0.5rem;\r\n}\r\n.pg-floor-plan-interactive-button {\r\n  align-items: center;\r\n  background-color: var(--color-cell);\r\n  border: none;\r\n  box-shadow: 0 0 1.2rem rgba(0, 0, 0, 0.5);\r\n  color: var(--color-content);\r\n  cursor: pointer;\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  justify-content: center;\r\n  padding: 1rem 2rem;\r\n}\r\n.pg-floor-plan-message {\r\n  background-image: linear-gradient(to right, transparent, white, transparent);\r\n  opacity: 0;\r\n  left: 0;\r\n  pointer-events: none;\r\n  position: fixed;\r\n  text-align: center;\r\n  transition: opacity 0.5s;\r\n  width: 100vw;\r\n  z-index: 3;\r\n}\r\n.pg-floor-plan-message--active {\r\n  opacity: 1;\r\n}\r\n`\r\n","import { dialogPolyfill, dialog, floorPlan, icons, mobile, search, table, theme, loading } from './styles'\r\n\r\n\r\nexport const getStyles = breakpoint => /* css */`\r\n\r\n/* browser defaults for dialog element */\r\n${dialogPolyfill}\r\n\r\n.pg-header {\r\n  background-color: var(--color-background);\r\n  display: grid;\r\n  grid-template-columns: 1fr auto;\r\n  height: 3.5rem;\r\n}\r\n\r\n.pg-maximize-button {\r\n  background-color: var(--color-header);\r\n  border: 0.2rem solid var(--color-background);\r\n  border-left-width: 0;\r\n  border-bottom-width: 0;\r\n  color: var(--color-header-content);\r\n  cursor: pointer;\r\n  margin: 0;\r\n}\r\n\r\n.pg-maximized {\r\n  position: fixed;\r\n  height: 100vh;\r\n  width: 100vw;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  margin: auto;\r\n}\r\n\r\n.pg-maximized .pg-table-wrapper,\r\n.pg-maximized .pg-floor-plan-wrapper {\r\n  height: calc(100vh - 3.5rem);\r\n  max-height: none;\r\n}\r\n\r\n${loading}\r\n${theme}\r\n${search}\r\n${table}\r\n${icons}\r\n${dialog}\r\n${floorPlan}\r\n\r\n/* apply mobiles styles within the provided breakpoint */\r\n@media (max-width: ${breakpoint}) {\r\n  ${mobile}\r\n}\r\n`\r\n","import { DEFAULT_BREAKPOINT, DEFAULT_TIMES } from '../../../constants'\r\nimport { mapString, runMethod } from '../../../utilities'\r\n\r\nconst renderSortDialog = ({ hasFloorPlan, locations, times, activeDay, activeTime: _activeTime }, breakpoint = DEFAULT_BREAKPOINT) => {\r\n\r\n  // only show location list if the columns are collapsed\r\n  const beyondThreshold = !window.matchMedia(`(max-width: ${breakpoint})`).matches\r\n  const { days, interval } = times || DEFAULT_TIMES\r\n  const getTimeValue = date => date.toLocaleTimeString([], { hour12: false, timeStyle: 'short' })\r\n  const activeTime = getTimeValue(_activeTime)\r\n  const currentTimes = days[activeDay]\r\n  const minTime = getTimeValue(currentTimes[0].date)\r\n  const maxTime = getTimeValue(currentTimes[currentTimes.length - 1].date)\r\n  const step = interval * 60\r\n\r\n  return /* html */`\r\n    <section class=\"pg-dialog-body\">\r\n      <header class=\"pg-dialog-header\">\r\n        <h1 class=\"pg-dialog-title\">Options</h1>\r\n        <button class=\"pg-dialog-close\" title=\"Close\" onclick=\"${runMethod('toggleSortDialog', false)}\"><i class=\"pg-close-icon\" title=\"Close\"></i></button>\r\n      </header>\r\n      <section class=\"pg-dialog-content\">\r\n        <menu class=\"pg-dialog-menu\">\r\n          <button class=\"pg-dialog-menu-item\" onclick=\"${runMethod('selectSortBy', 'favorites')}\">\r\n            <i class=\"pg-favorite-icon\" title=\"View Favorites\">&starf;</i>\r\n            <span>View Favorites</span>\r\n          </button>\r\n          ${hasFloorPlan\r\n            ?\r\n              /* html */`\r\n              <button class=\"pg-dialog-menu-item\" onclick=\"${runMethod('showFloorPlan', 'none')}\">\r\n                <span>View Floor Plan</span>\r\n              </button>`\r\n            : ''\r\n          }\r\n        </menu>\r\n        <menu class=\"pg-dialog-menu\">\r\n          <label class=\"pg-dialog-menu-title\">Which day?\r\n            <select class=\"pg-dialog-select\" onchange=\"${runMethod('selectActiveDay')}\">\r\n              ${mapString(Object.keys(days), day => /* html */`\r\n                <option value=\"${day}\" ${day === activeDay ? 'selected' : ''}>${day}</option>\r\n              `)}\r\n            </select>\r\n          </label>\r\n        </menu>\r\n        <menu class=\"pg-dialog-menu\">\r\n          <h2 class=\"pg-dialog-menu-title\">Filter by Time</h2>\r\n          <button class=\"pg-dialog-menu-item\" onclick=\"${runMethod('selectSortBy', 'allTime')}\" autofocus>All Times This Day</button>\r\n          <button class=\"pg-dialog-menu-item\" onclick=\"${runMethod('selectSortBy', 'now')}\">Right Now &amp; Onward</button>\r\n          <button class=\"pg-dialog-menu-item\" onclick=\"${runMethod('selectSortBy', 'nowOnly')}\">Right Now Only</button>\r\n          <div class=\"pg-dialog-menu-special-item\">\r\n            <div class=\"pg-dialog-menu-item pg-dialog-menu-item--input\">\r\n              <input\r\n                type=\"time\"\r\n                class=\"pg-dialog-menu-input pg-dialog-menu-input--time\"\r\n                value=\"${activeTime}\"\r\n                min=\"${minTime}\"\r\n                max=\"${maxTime}\"\r\n                step=\"${step}\"\r\n                onchange=\"${runMethod('selectActiveTime')}\"\r\n              />\r\n              <span class=\"pg-inline-text\">&amp; On</span>\r\n            </div>\r\n            <button class=\"pg-dialog-menu-item\" onclick=\"${runMethod('selectSortBy', 'time')}\">Go &roarr;</button>\r\n          </div>\r\n        </menu>\r\n        <menu class=\"pg-dialog-menu\">\r\n          <h2 class=\"pg-dialog-menu-title\">Filter by Location</h2>\r\n          ${beyondThreshold\r\n            ? /* html */`<button class=\"pg-dialog-menu-item\" onclick=\"${runMethod('selectSortBy', 'location')}\">All Locations</button>`\r\n            : mapString(locations, _location => /* html */`\r\n              <button class=\"pg-dialog-menu-item\" onclick=\"${runMethod('selectActiveLocation', _location)}\">${_location}</button>\r\n            `)\r\n          }\r\n        </menu>\r\n      </section>\r\n    </section>\r\n  `\r\n}\r\n\r\nexport default renderSortDialog\r\n","import { mapString, runMethod } from '../../../utilities'\r\n\r\nconst renderEventDialog = ({ favorites, activeEvent, sortBy }) => {\r\n\r\n  const existingFavorite = favorites.find(({ location: _location, start, name }) => {\r\n    const { location: aLocation, start: aStart, name: aName } = activeEvent\r\n    return _location === aLocation && Number(new Date(start)) === Number(aStart) && name === aName\r\n  })\r\n  const favoriteMethod = existingFavorite ? 'removeFavorite' : 'addFavorite'\r\n  const favoriteText = existingFavorite ? 'Remove from Favorites' : 'Add to Favorites'\r\n\r\n  return /* html */`\r\n    <article class=\"pg-dialog-body\">\r\n      <header class=\"pg-dialog-header\">\r\n        <h1 class=\"pg-dialog-title\">${activeEvent.name}</h1>\r\n        <button class=\"pg-dialog-close\" onclick=\"${runMethod('closeEventDialog')}\"><i class=\"pg-close-icon\" title=\"Close\"></i></button>\r\n      </header>\r\n      <section class=\"pg-dialog-content pg-dialog-content--text-container\">\r\n        ${mapString(activeEvent.description.split(/\\n/), paragraph => /* html */`\r\n          <p class=\"pg-dialog-paragraph\">${paragraph}</p>\r\n        `)}\r\n      </section>\r\n      <footer class=\"pg-dialog-footer\">\r\n        <time datetime=\"${activeEvent.start.toISOString()}\" class=\"pg-time pg-time--start\">\r\n          ${activeEvent.start.toLocaleTimeString('en-US', { timeStyle: 'short' })}\r\n        </time>\r\n        to\r\n        <time datetime=\"${activeEvent.end.toISOString()}\" class=\"pg-time pg-time--end\">\r\n          ${activeEvent.end.toLocaleTimeString('en-US', { timeStyle: 'short' })}\r\n        </time>\r\n        <div>@ ${activeEvent.location}</div>\r\n        <div class=\"pg-dialog-details\">\r\n          <div><strong>Hosted by:</strong> <span>${activeEvent.host}</span></div>\r\n          <div><strong>Category:</strong> <span>${activeEvent.category}</span></div>\r\n        </div>\r\n      </footer>\r\n      <section class=\"pg-dialog-content\">\r\n        <menu class=\"pg-dialog-menu\">\r\n          <button class=\"pg-dialog-menu-item\" onclick=\"${runMethod(favoriteMethod, activeEvent)}\" autofocus>\r\n            <span>${favoriteText}</span>\r\n            <i class=\"pg-favorite-icon\" title=\"${favoriteText}\">&starf;</i>\r\n          </button>\r\n          ${sortBy === 'favorites'\r\n            ? ''\r\n            : /* html */\r\n              `<button class=\"pg-dialog-menu-item\" onclick=\"${runMethod('selectSortBy', 'favorites')}\" autofocus>\r\n                <span>View All Favorites</span>\r\n                <i class=\"pg-favorite-icon\" title=\"View All Favorites\">&starf;</i>\r\n              </button>`\r\n          }\r\n        </menu>\r\n      </section>\r\n    </article>\r\n  `\r\n}\r\n\r\nexport default renderEventDialog\r\n","import { DEFAULT_TIMES } from '../../../constants'\r\nimport { getEventId, mapString, runMethod, trim } from '../../../utilities'\r\nimport { getCellData } from '../componentUtils'\r\n\r\nconst renderByLocation = ({ activeLocation, events, times: allTimes, locations, activeDay, marker }) => {\r\n\r\n  const { days, interval } = allTimes || DEFAULT_TIMES\r\n\r\n  // this keeps rowspans from previous iterations in memory\r\n  // so we can avoid adding extra table cells.\r\n  const spanState = {}\r\n\r\n  // utility to check if the given location is active and return the class accordingly\r\n  const getActiveClass = (_location, className) => activeLocation === _location ? className : ''\r\n  const getMarkerClass = (_location, className) => marker === _location ? className : ''\r\n\r\n  // get all the times in the current day\r\n  const times = days[activeDay]\r\n\r\n  return /* html */`\r\n    <div class=\"pg-table-wrapper\">\r\n      <table class=\"pg-table\">\r\n        <thead class=\"pg-table-header\">\r\n          <tr class=\"pg-row\">\r\n            <td class=\"pg-cell-wrapper pg-cell-wrapper--corner\" onclick=\"${runMethod('toggleSortDialog', true)}\">\r\n              <div class=\"pg-cell pg-cell--corner\"><i class=\"pg-more-icon\" title=\"Options...\"></i> <span class=\"pg-corner-text\">${activeDay}</span></div>\r\n            </td>\r\n            ${mapString(locations, _location => /* html */`\r\n              <th\r\n                class=\"\r\n                  pg-cell-wrapper\r\n                  pg-cell-wrapper--column-header\r\n                  pg-cell-wrapper--column-header-location\r\n                  ${getActiveClass(_location, 'pg-cell-wrapper--column-header-active')}\r\n                  ${getMarkerClass(_location, 'pg-cell-wrapper--column-header-active-location')}\r\n                \"\r\n                onclick=\"${runMethod('showFloorPlan', _location)}\"\r\n              >\r\n                <div class=\"pg-cell pg-cell--column-header ${getActiveClass(_location, 'pg-cell--column-header-active')}\">\r\n                  <i class=\"pg-map-icon\"></i>\r\n                  <span class=\"pg-inline-text\">${_location}</span>\r\n                </div>\r\n              </th>\r\n            `)}\r\n          </tr>\r\n        </thead>\r\n        <tbody class=\"pg-body\">\r\n          ${mapString(times, ({ date, timeString }) => /* html */`\r\n            <tr class=\"pg-row\">\r\n              <th class=\"pg-cell-wrapper pg-cell-wrapper--row-header\">\r\n                <div class=\"pg-cell pg-cell--row-header\">${timeString}</div>\r\n              </th>\r\n              ${mapString(locations, _location => {\r\n                const { eventName, cellType, span, blank, event } = getCellData({ events, spanState, date, interval, _location })\r\n                if (blank) return '' // blank if cell from previous row occupies this space\r\n                return /* html */`\r\n                  <td\r\n                    class=\"pg-cell-wrapper pg-cell-wrapper--${cellType} ${getActiveClass(_location, `pg-cell-wrapper--${cellType}-active`)}\"\r\n                    rowspan=\"${span}\"\r\n                    id=\"${event ? getEventId(event) : ''}\"\r\n                    ${event ? `onclick=\"${runMethod('openEventDialog', event)}\"` : ''}\r\n                  >\r\n                    <div class=\"pg-cell pg-cell--${cellType} ${getActiveClass(_location, `pg-cell--${cellType}-active`)}\">${trim(eventName)}</div>\r\n                  </td>\r\n                `\r\n              })}\r\n            </tr>\r\n          `)}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  `\r\n}\r\n\r\nexport default renderByLocation\r\n","import { DEFAULT_TIMES } from '../../../constants'\r\nimport { getDateInfo, getEventId, mapString, roundMinutes, runMethod, trim } from '../../../utilities'\r\nimport { getCellData } from '../componentUtils'\r\n\r\nconst renderByTime = ({ events, times: allTimes, locations, sortBy, activeTime, activeDay }) => {\r\n\r\n  const { days, interval } = allTimes || DEFAULT_TIMES\r\n\r\n  // this keeps colspans from previous iterations in memory\r\n  // so we can avoid adding extra table cells.\r\n  const spanState = {}\r\n\r\n  // determine how to filter times\r\n  const _times = days[activeDay]\r\n  const now = roundMinutes(Date.now(), interval)\r\n  const { day: nowDay, date: nowDate, time: nowTime } = getDateInfo(now)\r\n  const filterMap = {\r\n    now: _times.filter(({ date }) => date >= now),\r\n    nowOnly: _times.filter(({ date }) => date === now),\r\n    time: _times.filter(({ date }) => date >= activeTime),\r\n    allTime: _times,\r\n  }\r\n  const filteredTimes = filterMap[sortBy]\r\n  const times = filteredTimes.length ? filteredTimes : [{ date: now, timeString: nowTime }]\r\n  const currentDay = filteredTimes.length ? activeDay : `${nowDay} ${nowDate}`\r\n  const timeMap = {\r\n    now,\r\n    nowOnly: now,\r\n    time: activeTime,\r\n    allTime: new Date(0),\r\n  }\r\n  const currentTime = timeMap[sortBy]\r\n\r\n  return /* html */`\r\n    <div class=\"pg-table-wrapper\">\r\n      <table class=\"pg-table\">\r\n        <thead class=\"pg-table-header\">\r\n          <tr class=\"pg-row\">\r\n            <td class=\"pg-cell-wrapper pg-cell-wrapper--corner pg-cell-wrapper--corner-collapsed\" onclick=\"${runMethod('toggleSortDialog', true)}\">\r\n              <div class=\"pg-cell pg-cell--corner\"><i class=\"pg-more-icon\" title=\"Options...\"></i> <span class=\"pg-corner-text\">${currentDay}</span></div>\r\n            </td>\r\n            ${mapString(times, ({ date, timeString }) => /* html */`\r\n              <th class=\"pg-cell-wrapper pg-cell-wrapper--column-header pg-cell-wrapper--column-header-time ${date === now ? 'pg-cell-wrapper--column-header-active-time' : ''}\">\r\n                <div class=\"pg-cell pg-cell--column-header pg-cell--column-header-time\">\r\n                  <span>${timeString}</span>\r\n                  <div>${date === now ? '(Current Time)' : ''}</div>\r\n                </div>\r\n              </th>\r\n            `)}\r\n          </tr>\r\n        </thead>\r\n        <tbody class=\"pg-body\">\r\n          ${mapString(locations, _location => /* html */`\r\n            <tr class=\"pg-row\">\r\n              <th class=\"pg-cell-wrapper pg-cell-wrapper--row-header pg-cell-wrapper--row-header-${sortBy === 'nowOnly' ? 'now' : 'time'} pg-cell-wrapper--row-header-collapsed\" onclick=\"${runMethod('toggleHeaders')}\">\r\n                <div class=\"pg-cell pg-cell--row-header\" onclick=\"${runMethod('showFloorPlan', _location)}\">\r\n                  <i class=\"pg-map-icon\"></i>\r\n                  <span class=\"pg-inline-text\">${_location}</span>\r\n                </div>\r\n              </th>\r\n              ${mapString(times, ({ date }) => {\r\n                const { eventName, cellType, span, blank, event, hasStarted } = getCellData({ events, spanState, date, interval, _location, currentTime })\r\n                if (blank) return '' // blank if cell from previous row occupies this space\r\n                return /* html */`\r\n                  <td\r\n                    class=\"pg-cell-wrapper pg-cell-wrapper--${cellType} pg-cell-wrapper--${cellType}-${sortBy === 'nowOnly' ? 'now' : 'time'} ${hasStarted ? 'pg-cell-wrapper--overflow' : ''}\"\r\n                    colspan=\"${span}\"\r\n                    id=\"${event ? getEventId(event) : ''}\"\r\n                    ${event ? `onclick=\"${runMethod('openEventDialog', event)}\"` : ''}\r\n                  >\r\n                    <div class=\"pg-cell pg-cell--${cellType} pg-cell--${cellType}-${sortBy === 'nowOnly' ? 'now' : 'time'}\">${trim(eventName)}</div>\r\n                  </td>\r\n                `\r\n              })}\r\n            </tr>\r\n          `)}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  `\r\n}\r\n\r\nexport default renderByTime\r\n","import { mapString, runMethod, getDateInfo, trim } from '../../../utilities'\r\n\r\nconst renderFavorites = ({ favorites }) => /* html */`\r\n  <div class=\"pg-table-wrapper\">\r\n    <table class=\"pg-table\">\r\n      <thead class=\"pg-table-header\">\r\n        <tr class=\"pg-row\">\r\n          <td class=\"pg-cell-wrapper pg-cell-wrapper--corner\" onclick=\"${runMethod('toggleSortDialog', true)}\">\r\n            <div class=\"pg-cell pg-cell--corner\"><i class=\"pg-more-icon\" title=\"Options...\"></i> Favorites</div>\r\n          </td>\r\n        </tr>\r\n      </thead>\r\n      <tbody class=\"pg-body\">\r\n        ${favorites.length === 0\r\n          ? /* html */`\r\n              <tr class=\"pg-row\">\r\n                <td class=\"pg-cell-wrapper pg-cell-wrapper--data pg-cell-wrapper--data-favorite\">\r\n                  <div class=\"pg-cell pg-cell--data pg-cell--data-favorite\">You have no favorites.</div>\r\n                </td>\r\n              </tr>\r\n            `\r\n          : mapString(favorites, event => {\r\n            const { start, end, name, location } = event\r\n            const startDate = getDateInfo(start)\r\n            const endDate = getDateInfo(end)\r\n            const day = `${startDate.day} ${startDate.date}`\r\n            const startTime = startDate.time\r\n            const endTime = endDate.time\r\n            return /* html */`\r\n              <tr class=\"pg-row\">\r\n                <td class=\"pg-cell-wrapper pg-cell-wrapper--data pg-cell-wrapper--data-favorite\" onclick=\"${runMethod('openEventDialog', event)}\">\r\n                  <div class=\"pg-cell pg-cell--data pg-cell--data-favorite\">\r\n                    <span class=\"pg-search-result-name\">${trim(name)}</span>\r\n                    <span class=\"pg-inline-result-details\">${day}</span>\r\n                    <span class=\"pg-search-result-details\">\r\n                      <span class=\"pg-inline-text\">${startTime}</span>\r\n                      <span class=\"pg-inline-text\">- ${endTime}</span>\r\n                      <span class=\"pg-inline-text\"> @ ${location}</span>\r\n                    </span>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            `\r\n          })\r\n        }\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n`\r\n\r\nexport default renderFavorites\r\n","import { runMethod } from '../../../utilities'\r\n\r\nconst renderSearchBar = ({ currentSearch }) => /* html */`\r\n  <form class=\"pg-search-bar\" onsubmit=\"${runMethod('search')}\">\r\n    <input class=\"pg-search-input\" onchange=\"${runMethod('changeSearch')}\" placeholder=\"Search events ...\" value=\"${currentSearch}\" />\r\n    <button class=\"pg-search-button\"><i class=\"pg-search-icon\" title=\"Search\"></i></button>\r\n  </form>\r\n`\r\n\r\nexport default renderSearchBar\r\n","import { getDateInfo, mapString, runMethod, trim } from '../../../utilities'\r\n\r\nconst renderSearchResults = ({ searchResults }) => /* html */`\r\n  <div class=\"pg-table-wrapper\">\r\n    <table class=\"pg-table\">\r\n      <thead class=\"pg-table-header\">\r\n        <tr class=\"pg-row\">\r\n          <td class=\"pg-cell-wrapper pg-cell-wrapper--corner\" onclick=\"${runMethod('toggleSortDialog', true)}\">\r\n            <div class=\"pg-cell pg-cell--corner\"><i class=\"pg-more-icon\" title=\"Options...\"></i> Search Results</div>\r\n          </td>\r\n        </tr>\r\n      </thead>\r\n      <tbody class=\"pg-body\">\r\n        ${searchResults.length === 0\r\n          ? /* html */`\r\n              <tr class=\"pg-row\">\r\n                <td class=\"pg-cell-wrapper pg-cell-wrapper--data pg-cell-wrapper--data-search\">\r\n                  <div class=\"pg-cell pg-cell--data pg-cell--data-search\">No results found.</div>\r\n                </td>\r\n              </tr>\r\n            `\r\n          : mapString(searchResults, event => {\r\n            const { start, end, name, location } = event\r\n            const startDate = getDateInfo(start)\r\n            const endDate = getDateInfo(end)\r\n            const day = `${startDate.day} ${startDate.date}`\r\n            const startTime = startDate.time\r\n            const endTime = endDate.time\r\n            return /* html */`\r\n              <tr class=\"pg-row\">\r\n                <td class=\"pg-cell-wrapper pg-cell-wrapper--data pg-cell-wrapper--data-search\" onclick=\"${runMethod('openEventDialog', event)}\">\r\n                  <div class=\"pg-cell pg-cell--data pg-cell--data-search\">\r\n                    <span class=\"pg-search-result-name\">${trim(name)}</span>\r\n                    <span class=\"pg-inline-result-details\">${day}</span>\r\n                    <span class=\"pg-search-result-details\">\r\n                      <span class=\"pg-inline-text\">${startTime}</span>\r\n                      <span class=\"pg-inline-text\">- ${endTime}</span>\r\n                      <span class=\"pg-inline-text\"> @ ${location}</span>\r\n                    </span>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            `\r\n          })\r\n        }\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n`\r\n\r\nexport default renderSearchResults\r\n","import { mapString, runMethod, getMarkerCoords } from '../../../utilities'\r\n\r\nconst renderFloorPlan = ({ floorPlan, floorPlanInteractive, marker }) => {\r\n  const { title, clickableAreas, dimensions } = floorPlan\r\n  const { height, width } = dimensions\r\n  const showMap = clickableAreas.length > 0 && floorPlanInteractive\r\n  const markerCoords = marker !== 'none' ? getMarkerCoords(marker, clickableAreas) : []\r\n  const [x, y] = markerCoords\r\n  const zoomButtonText = floorPlanInteractive ? 'Fit to Screen' : 'Original Size'\r\n\r\n  return /* html */`\r\n    <div class=\"pg-floor-plan-wrapper\">\r\n      <header class=\"pg-floor-plan-header\">\r\n        <menu class=\"pg-floor-plan-menu\">\r\n          <button class=\"pg-floor-plan-menu-button\" onclick=\"${runMethod('toggleSortDialog', true)}\">\r\n            <i class=\"pg-more-icon\" title=\"Options...\"></i>\r\n          </button>\r\n          <div class=\"pg-floor-plan-menu-section\">\r\n            <button class=\"pg-floor-plan-interactive-button\" onclick=\"${runMethod('toggleFloorPlanInteractive', null)}\">\r\n              <i class=\"pg-search-icon\" title=\"${zoomButtonText}\"></i> ${zoomButtonText}\r\n            </button>\r\n            ${clickableAreas.length > 0\r\n              ? (floorPlanInteractive\r\n                  ? /* html */`<span class=\"pg-inline-text\">Select an area for details.</span>`\r\n                  : /* html */`<span class=\"pg-inline-text\">View original size for more actions.</span>`\r\n                )\r\n              : ''\r\n            }\r\n          </div>\r\n        </menu>\r\n        <h1 class=\"pg-floor-plan-title\">${title}</h1>\r\n      </header>\r\n      <div class=\"pg-floor-plan-container\">\r\n\r\n        ${showMap\r\n          ? /* html */`\r\n            <map name=\"floorPlan\" id=\"floorPlan\">\r\n              ${mapString(clickableAreas, ({ shape, coords, href, alt, location: _location }) => {\r\n                const fullHref = href.startsWith(':') ? `http${href}`\r\n                  : href.startsWith('//') ? `http:${href}`\r\n                  : href\r\n                const isExternalLink = fullHref.startsWith('http')\r\n                  && new URL(fullHref).hostname !== location.hostname\r\n                return /* html */`\r\n                  <area\r\n                    shape=\"${shape}\"\r\n                    coords=\"${coords.join(',')}\"\r\n                    href=\"${href}\"\r\n                    ${isExternalLink ? `\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                    ` : ''\r\n                    }\r\n                    alt=\"${alt ?? _location}\"\r\n                  />\r\n                `\r\n              })}\r\n            </map>`\r\n          : ''\r\n        }\r\n\r\n        <div class=\"pg-floor-plan-image-wrapper ${showMap ? 'pg-floor-plan-image-wrapper--interactive' : ''}\" onclick=\"${runMethod('showFloorPlanMessage', 'event', 'No link was provided for that area.')}\">\r\n\r\n          <!-- This exists to prevent a safari OCR bug from interfering with the image map -->\r\n          <img\r\n            class=\"pg-overlay-image\"\r\n            ${showMap ? 'usemap=\"#floorPlan\"' : ''}\r\n            height=\"${height}\"\r\n            width=\"${width}\"\r\n            src=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAAAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNy4xLWMwMDAgNzkuYjBmOGJlOTAsIDIwMjEvMTIvMTUtMjE6MjU6MTUgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCAyMy4yIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxQUE0RjNBMEE0MDkxMUVDOTAwN0ZBRjQwRjZGNkFBMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxQUE0RjNBMUE0MDkxMUVDOTAwN0ZBRjQwRjZGNkFBMiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFBQTRGMzlFQTQwOTExRUM5MDA3RkFGNDBGNkY2QUEyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFBQTRGMzlGQTQwOTExRUM5MDA3RkFGNDBGNkY2QUEyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAAAsAAAAAAEAAQAAAgJEAQA7\"\r\n          />\r\n\r\n          <!-- This gets replaced by the image element stored in memory for optimization -->\r\n          <img class=\"pg-floor-plan-image\" height=\"${height}\" width=\"${width}\" />\r\n          ${x && y && showMap\r\n            ? /* html */`\r\n              <div class=\"pg-floor-plan-marker\" style=\"--x: ${x}; --y: ${y}\">\r\n                <i class=\"pg-map-icon\"></i>\r\n              </div>`\r\n            : ''\r\n          }\r\n          <div class=\"pg-floor-plan-message\" role=\"alert\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `\r\n}\r\n\r\nexport default renderFloorPlan\r\n","// nb. This is for IE10 and lower _only_.\nvar supportCustomEvent = window.CustomEvent;\nif (!supportCustomEvent || typeof supportCustomEvent === 'object') {\n  supportCustomEvent = function CustomEvent(event, x) {\n    x = x || {};\n    var ev = document.createEvent('CustomEvent');\n    ev.initCustomEvent(event, !!x.bubbles, !!x.cancelable, x.detail || null);\n    return ev;\n  };\n  supportCustomEvent.prototype = window.Event.prototype;\n}\n\n/**\n * Dispatches the passed event to both an \"on<type>\" handler as well as via the\n * normal dispatch operation. Does not bubble.\n *\n * @param {!EventTarget} target\n * @param {!Event} event\n * @return {boolean}\n */\nfunction safeDispatchEvent(target, event) {\n  var check = 'on' + event.type.toLowerCase();\n  if (typeof target[check] === 'function') {\n    target[check](event);\n  }\n  return target.dispatchEvent(event);\n}\n\n/**\n * @param {Element} el to check for stacking context\n * @return {boolean} whether this el or its parents creates a stacking context\n */\nfunction createsStackingContext(el) {\n  while (el && el !== document.body) {\n    var s = window.getComputedStyle(el);\n    var invalid = function(k, ok) {\n      return !(s[k] === undefined || s[k] === ok);\n    };\n\n    if (s.opacity < 1 ||\n        invalid('zIndex', 'auto') ||\n        invalid('transform', 'none') ||\n        invalid('mixBlendMode', 'normal') ||\n        invalid('filter', 'none') ||\n        invalid('perspective', 'none') ||\n        s['isolation'] === 'isolate' ||\n        s.position === 'fixed' ||\n        s.webkitOverflowScrolling === 'touch') {\n      return true;\n    }\n    el = el.parentElement;\n  }\n  return false;\n}\n\n/**\n * Finds the nearest <dialog> from the passed element.\n *\n * @param {Element} el to search from\n * @return {HTMLDialogElement} dialog found\n */\nfunction findNearestDialog(el) {\n  while (el) {\n    if (el.localName === 'dialog') {\n      return /** @type {HTMLDialogElement} */ (el);\n    }\n    if (el.parentElement) {\n      el = el.parentElement;\n    } else if (el.parentNode) {\n      el = el.parentNode.host;\n    } else {\n      el = null;\n    }\n  }\n  return null;\n}\n\n/**\n * Blur the specified element, as long as it's not the HTML body element.\n * This works around an IE9/10 bug - blurring the body causes Windows to\n * blur the whole application.\n *\n * @param {Element} el to blur\n */\nfunction safeBlur(el) {\n  // Find the actual focused element when the active element is inside a shadow root\n  while (el && el.shadowRoot && el.shadowRoot.activeElement) {\n    el = el.shadowRoot.activeElement;\n  }\n\n  if (el && el.blur && el !== document.body) {\n    el.blur();\n  }\n}\n\n/**\n * @param {!NodeList} nodeList to search\n * @param {Node} node to find\n * @return {boolean} whether node is inside nodeList\n */\nfunction inNodeList(nodeList, node) {\n  for (var i = 0; i < nodeList.length; ++i) {\n    if (nodeList[i] === node) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * @param {HTMLFormElement} el to check\n * @return {boolean} whether this form has method=\"dialog\"\n */\nfunction isFormMethodDialog(el) {\n  if (!el || !el.hasAttribute('method')) {\n    return false;\n  }\n  return el.getAttribute('method').toLowerCase() === 'dialog';\n}\n\n/**\n * @param {!DocumentFragment|!Element} hostElement\n * @return {?Element}\n */\nfunction findFocusableElementWithin(hostElement) {\n  // Note that this is 'any focusable area'. This list is probably not exhaustive, but the\n  // alternative involves stepping through and trying to focus everything.\n  var opts = ['button', 'input', 'keygen', 'select', 'textarea'];\n  var query = opts.map(function(el) {\n    return el + ':not([disabled])';\n  });\n  // TODO(samthor): tabindex values that are not numeric are not focusable.\n  query.push('[tabindex]:not([disabled]):not([tabindex=\"\"])');  // tabindex != \"\", not disabled\n  var target = hostElement.querySelector(query.join(', '));\n\n  if (!target && 'attachShadow' in Element.prototype) {\n    // If we haven't found a focusable target, see if the host element contains an element\n    // which has a shadowRoot.\n    // Recursively search for the first focusable item in shadow roots.\n    var elems = hostElement.querySelectorAll('*');\n    for (var i = 0; i < elems.length; i++) {\n      if (elems[i].tagName && elems[i].shadowRoot) {\n        target = findFocusableElementWithin(elems[i].shadowRoot);\n        if (target) {\n          break;\n        }\n      }\n    }\n  }\n  return target;\n}\n\n/**\n * Determines if an element is attached to the DOM.\n * @param {Element} element to check\n * @return {boolean} whether the element is in DOM\n */\nfunction isConnected(element) {\n  return element.isConnected || document.body.contains(element);\n}\n\n/**\n * @param {!Event} event\n * @return {?Element}\n */\nfunction findFormSubmitter(event) {\n  if (event.submitter) {\n    return event.submitter;\n  }\n\n  var form = event.target;\n  if (!(form instanceof HTMLFormElement)) {\n    return null;\n  }\n\n  var submitter = dialogPolyfill.formSubmitter;\n  if (!submitter) {\n    var target = event.target;\n    var root = ('getRootNode' in target && target.getRootNode() || document);\n    submitter = root.activeElement;\n  }\n\n  if (!submitter || submitter.form !== form) {\n    return null;\n  }\n  return submitter;\n}\n\n/**\n * @param {!Event} event\n */\nfunction maybeHandleSubmit(event) {\n  if (event.defaultPrevented) {\n    return;\n  }\n  var form = /** @type {!HTMLFormElement} */ (event.target);\n\n  // We'd have a value if we clicked on an imagemap.\n  var value = dialogPolyfill.imagemapUseValue;\n  var submitter = findFormSubmitter(event);\n  if (value === null && submitter) {\n    value = submitter.value;\n  }\n\n  // There should always be a dialog as this handler is added specifically on them, but check just\n  // in case.\n  var dialog = findNearestDialog(form);\n  if (!dialog) {\n    return;\n  }\n\n  // Prefer formmethod on the button.\n  var formmethod = submitter && submitter.getAttribute('formmethod') || form.getAttribute('method');\n  if (formmethod !== 'dialog') {\n    return;\n  }\n  event.preventDefault();\n\n  if (value != null) {\n    // nb. we explicitly check against null/undefined\n    dialog.close(value);\n  } else {\n    dialog.close();\n  }\n}\n\n/**\n * @param {!HTMLDialogElement} dialog to upgrade\n * @constructor\n */\nfunction dialogPolyfillInfo(dialog) {\n  this.dialog_ = dialog;\n  this.replacedStyleTop_ = false;\n  this.openAsModal_ = false;\n\n  // Set a11y role. Browsers that support dialog implicitly know this already.\n  if (!dialog.hasAttribute('role')) {\n    dialog.setAttribute('role', 'dialog');\n  }\n\n  dialog.show = this.show.bind(this);\n  dialog.showModal = this.showModal.bind(this);\n  dialog.close = this.close.bind(this);\n\n  dialog.addEventListener('submit', maybeHandleSubmit, false);\n\n  if (!('returnValue' in dialog)) {\n    dialog.returnValue = '';\n  }\n\n  if ('MutationObserver' in window) {\n    var mo = new MutationObserver(this.maybeHideModal.bind(this));\n    mo.observe(dialog, {attributes: true, attributeFilter: ['open']});\n  } else {\n    // IE10 and below support. Note that DOMNodeRemoved etc fire _before_ removal. They also\n    // seem to fire even if the element was removed as part of a parent removal. Use the removed\n    // events to force downgrade (useful if removed/immediately added).\n    var removed = false;\n    var cb = function() {\n      removed ? this.downgradeModal() : this.maybeHideModal();\n      removed = false;\n    }.bind(this);\n    var timeout;\n    var delayModel = function(ev) {\n      if (ev.target !== dialog) { return; }  // not for a child element\n      var cand = 'DOMNodeRemoved';\n      removed |= (ev.type.substr(0, cand.length) === cand);\n      window.clearTimeout(timeout);\n      timeout = window.setTimeout(cb, 0);\n    };\n    ['DOMAttrModified', 'DOMNodeRemoved', 'DOMNodeRemovedFromDocument'].forEach(function(name) {\n      dialog.addEventListener(name, delayModel);\n    });\n  }\n  // Note that the DOM is observed inside DialogManager while any dialog\n  // is being displayed as a modal, to catch modal removal from the DOM.\n\n  Object.defineProperty(dialog, 'open', {\n    set: this.setOpen.bind(this),\n    get: dialog.hasAttribute.bind(dialog, 'open')\n  });\n\n  this.backdrop_ = document.createElement('div');\n  this.backdrop_.className = 'backdrop';\n  this.backdrop_.addEventListener('mouseup'  , this.backdropMouseEvent_.bind(this));\n  this.backdrop_.addEventListener('mousedown', this.backdropMouseEvent_.bind(this));\n  this.backdrop_.addEventListener('click'    , this.backdropMouseEvent_.bind(this));\n}\n\ndialogPolyfillInfo.prototype = /** @type {HTMLDialogElement.prototype} */ ({\n\n  get dialog() {\n    return this.dialog_;\n  },\n\n  /**\n   * Maybe remove this dialog from the modal top layer. This is called when\n   * a modal dialog may no longer be tenable, e.g., when the dialog is no\n   * longer open or is no longer part of the DOM.\n   */\n  maybeHideModal: function() {\n    if (this.dialog_.hasAttribute('open') && isConnected(this.dialog_)) { return; }\n    this.downgradeModal();\n  },\n\n  /**\n   * Remove this dialog from the modal top layer, leaving it as a non-modal.\n   */\n  downgradeModal: function() {\n    if (!this.openAsModal_) { return; }\n    this.openAsModal_ = false;\n    this.dialog_.style.zIndex = '';\n\n    // This won't match the native <dialog> exactly because if the user set top on a centered\n    // polyfill dialog, that top gets thrown away when the dialog is closed. Not sure it's\n    // possible to polyfill this perfectly.\n    if (this.replacedStyleTop_) {\n      this.dialog_.style.top = '';\n      this.replacedStyleTop_ = false;\n    }\n\n    // Clear the backdrop and remove from the manager.\n    this.backdrop_.parentNode && this.backdrop_.parentNode.removeChild(this.backdrop_);\n    dialogPolyfill.dm.removeDialog(this);\n  },\n\n  /**\n   * @param {boolean} value whether to open or close this dialog\n   */\n  setOpen: function(value) {\n    if (value) {\n      this.dialog_.hasAttribute('open') || this.dialog_.setAttribute('open', '');\n    } else {\n      this.dialog_.removeAttribute('open');\n      this.maybeHideModal();  // nb. redundant with MutationObserver\n    }\n  },\n\n  /**\n   * Handles mouse events ('mouseup', 'mousedown', 'click') on the fake .backdrop element, redirecting them as if\n   * they were on the dialog itself.\n   *\n   * @param {!Event} e to redirect\n   */\n  backdropMouseEvent_: function(e) {\n    if (!this.dialog_.hasAttribute('tabindex')) {\n      // Clicking on the backdrop should move the implicit cursor, even if dialog cannot be\n      // focused. Create a fake thing to focus on. If the backdrop was _before_ the dialog, this\n      // would not be needed - clicks would move the implicit cursor there.\n      var fake = document.createElement('div');\n      this.dialog_.insertBefore(fake, this.dialog_.firstChild);\n      fake.tabIndex = -1;\n      fake.focus();\n      this.dialog_.removeChild(fake);\n    } else {\n      this.dialog_.focus();\n    }\n\n    var redirectedEvent = document.createEvent('MouseEvents');\n    redirectedEvent.initMouseEvent(e.type, e.bubbles, e.cancelable, window,\n        e.detail, e.screenX, e.screenY, e.clientX, e.clientY, e.ctrlKey,\n        e.altKey, e.shiftKey, e.metaKey, e.button, e.relatedTarget);\n    this.dialog_.dispatchEvent(redirectedEvent);\n    e.stopPropagation();\n  },\n\n  /**\n   * Focuses on the first focusable element within the dialog. This will always blur the current\n   * focus, even if nothing within the dialog is found.\n   */\n  focus_: function() {\n    // Find element with `autofocus` attribute, or fall back to the first form/tabindex control.\n    var target = this.dialog_.querySelector('[autofocus]:not([disabled])');\n    if (!target && this.dialog_.tabIndex >= 0) {\n      target = this.dialog_;\n    }\n    if (!target) {\n      target = findFocusableElementWithin(this.dialog_);\n    }\n    safeBlur(document.activeElement);\n    target && target.focus();\n  },\n\n  /**\n   * Sets the zIndex for the backdrop and dialog.\n   *\n   * @param {number} dialogZ\n   * @param {number} backdropZ\n   */\n  updateZIndex: function(dialogZ, backdropZ) {\n    if (dialogZ < backdropZ) {\n      throw new Error('dialogZ should never be < backdropZ');\n    }\n    this.dialog_.style.zIndex = dialogZ;\n    this.backdrop_.style.zIndex = backdropZ;\n  },\n\n  /**\n   * Shows the dialog. If the dialog is already open, this does nothing.\n   */\n  show: function() {\n    if (!this.dialog_.open) {\n      this.setOpen(true);\n      this.focus_();\n    }\n  },\n\n  /**\n   * Show this dialog modally.\n   */\n  showModal: function() {\n    if (this.dialog_.hasAttribute('open')) {\n      throw new Error('Failed to execute \\'showModal\\' on dialog: The element is already open, and therefore cannot be opened modally.');\n    }\n    if (!isConnected(this.dialog_)) {\n      throw new Error('Failed to execute \\'showModal\\' on dialog: The element is not in a Document.');\n    }\n    if (!dialogPolyfill.dm.pushDialog(this)) {\n      throw new Error('Failed to execute \\'showModal\\' on dialog: There are too many open modal dialogs.');\n    }\n\n    if (createsStackingContext(this.dialog_.parentElement)) {\n      console.warn('A dialog is being shown inside a stacking context. ' +\n          'This may cause it to be unusable. For more information, see this link: ' +\n          'https://github.com/GoogleChrome/dialog-polyfill/#stacking-context');\n    }\n\n    this.setOpen(true);\n    this.openAsModal_ = true;\n\n    // Optionally center vertically, relative to the current viewport.\n    if (dialogPolyfill.needsCentering(this.dialog_)) {\n      dialogPolyfill.reposition(this.dialog_);\n      this.replacedStyleTop_ = true;\n    } else {\n      this.replacedStyleTop_ = false;\n    }\n\n    // Insert backdrop.\n    this.dialog_.parentNode.insertBefore(this.backdrop_, this.dialog_.nextSibling);\n\n    // Focus on whatever inside the dialog.\n    this.focus_();\n  },\n\n  /**\n   * Closes this HTMLDialogElement. This is optional vs clearing the open\n   * attribute, however this fires a 'close' event.\n   *\n   * @param {string=} opt_returnValue to use as the returnValue\n   */\n  close: function(opt_returnValue) {\n    if (!this.dialog_.hasAttribute('open')) {\n      throw new Error('Failed to execute \\'close\\' on dialog: The element does not have an \\'open\\' attribute, and therefore cannot be closed.');\n    }\n    this.setOpen(false);\n\n    // Leave returnValue untouched in case it was set directly on the element\n    if (opt_returnValue !== undefined) {\n      this.dialog_.returnValue = opt_returnValue;\n    }\n\n    // Triggering \"close\" event for any attached listeners on the <dialog>.\n    var closeEvent = new supportCustomEvent('close', {\n      bubbles: false,\n      cancelable: false\n    });\n    safeDispatchEvent(this.dialog_, closeEvent);\n  }\n\n});\n\nvar dialogPolyfill = {};\n\ndialogPolyfill.reposition = function(element) {\n  var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n  var topValue = scrollTop + (window.innerHeight - element.offsetHeight) / 2;\n  element.style.top = Math.max(scrollTop, topValue) + 'px';\n};\n\ndialogPolyfill.isInlinePositionSetByStylesheet = function(element) {\n  for (var i = 0; i < document.styleSheets.length; ++i) {\n    var styleSheet = document.styleSheets[i];\n    var cssRules = null;\n    // Some browsers throw on cssRules.\n    try {\n      cssRules = styleSheet.cssRules;\n    } catch (e) {}\n    if (!cssRules) { continue; }\n    for (var j = 0; j < cssRules.length; ++j) {\n      var rule = cssRules[j];\n      var selectedNodes = null;\n      // Ignore errors on invalid selector texts.\n      try {\n        selectedNodes = document.querySelectorAll(rule.selectorText);\n      } catch(e) {}\n      if (!selectedNodes || !inNodeList(selectedNodes, element)) {\n        continue;\n      }\n      var cssTop = rule.style.getPropertyValue('top');\n      var cssBottom = rule.style.getPropertyValue('bottom');\n      if ((cssTop && cssTop !== 'auto') || (cssBottom && cssBottom !== 'auto')) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\ndialogPolyfill.needsCentering = function(dialog) {\n  var computedStyle = window.getComputedStyle(dialog);\n  if (computedStyle.position !== 'absolute') {\n    return false;\n  }\n\n  // We must determine whether the top/bottom specified value is non-auto.  In\n  // WebKit/Blink, checking computedStyle.top == 'auto' is sufficient, but\n  // Firefox returns the used value. So we do this crazy thing instead: check\n  // the inline style and then go through CSS rules.\n  if ((dialog.style.top !== 'auto' && dialog.style.top !== '') ||\n      (dialog.style.bottom !== 'auto' && dialog.style.bottom !== '')) {\n    return false;\n  }\n  return !dialogPolyfill.isInlinePositionSetByStylesheet(dialog);\n};\n\n/**\n * @param {!Element} element to force upgrade\n */\ndialogPolyfill.forceRegisterDialog = function(element) {\n  if (window.HTMLDialogElement || element.showModal) {\n    console.warn('This browser already supports <dialog>, the polyfill ' +\n        'may not work correctly', element);\n  }\n  if (element.localName !== 'dialog') {\n    throw new Error('Failed to register dialog: The element is not a dialog.');\n  }\n  new dialogPolyfillInfo(/** @type {!HTMLDialogElement} */ (element));\n};\n\n/**\n * @param {!Element} element to upgrade, if necessary\n */\ndialogPolyfill.registerDialog = function(element) {\n  if (!element.showModal) {\n    dialogPolyfill.forceRegisterDialog(element);\n  }\n};\n\n/**\n * @constructor\n */\ndialogPolyfill.DialogManager = function() {\n  /** @type {!Array<!dialogPolyfillInfo>} */\n  this.pendingDialogStack = [];\n\n  var checkDOM = this.checkDOM_.bind(this);\n\n  // The overlay is used to simulate how a modal dialog blocks the document.\n  // The blocking dialog is positioned on top of the overlay, and the rest of\n  // the dialogs on the pending dialog stack are positioned below it. In the\n  // actual implementation, the modal dialog stacking is controlled by the\n  // top layer, where z-index has no effect.\n  this.overlay = document.createElement('div');\n  this.overlay.className = '_dialog_overlay';\n  this.overlay.addEventListener('click', function(e) {\n    this.forwardTab_ = undefined;\n    e.stopPropagation();\n    checkDOM([]);  // sanity-check DOM\n  }.bind(this));\n\n  this.handleKey_ = this.handleKey_.bind(this);\n  this.handleFocus_ = this.handleFocus_.bind(this);\n\n  this.zIndexLow_ = 100000;\n  this.zIndexHigh_ = 100000 + 150;\n\n  this.forwardTab_ = undefined;\n\n  if ('MutationObserver' in window) {\n    this.mo_ = new MutationObserver(function(records) {\n      var removed = [];\n      records.forEach(function(rec) {\n        for (var i = 0, c; c = rec.removedNodes[i]; ++i) {\n          if (!(c instanceof Element)) {\n            continue;\n          } else if (c.localName === 'dialog') {\n            removed.push(c);\n          }\n          removed = removed.concat(c.querySelectorAll('dialog'));\n        }\n      });\n      removed.length && checkDOM(removed);\n    });\n  }\n};\n\n/**\n * Called on the first modal dialog being shown. Adds the overlay and related\n * handlers.\n */\ndialogPolyfill.DialogManager.prototype.blockDocument = function() {\n  document.documentElement.addEventListener('focus', this.handleFocus_, true);\n  document.addEventListener('keydown', this.handleKey_);\n  this.mo_ && this.mo_.observe(document, {childList: true, subtree: true});\n};\n\n/**\n * Called on the first modal dialog being removed, i.e., when no more modal\n * dialogs are visible.\n */\ndialogPolyfill.DialogManager.prototype.unblockDocument = function() {\n  document.documentElement.removeEventListener('focus', this.handleFocus_, true);\n  document.removeEventListener('keydown', this.handleKey_);\n  this.mo_ && this.mo_.disconnect();\n};\n\n/**\n * Updates the stacking of all known dialogs.\n */\ndialogPolyfill.DialogManager.prototype.updateStacking = function() {\n  var zIndex = this.zIndexHigh_;\n\n  for (var i = 0, dpi; dpi = this.pendingDialogStack[i]; ++i) {\n    dpi.updateZIndex(--zIndex, --zIndex);\n    if (i === 0) {\n      this.overlay.style.zIndex = --zIndex;\n    }\n  }\n\n  // Make the overlay a sibling of the dialog itself.\n  var last = this.pendingDialogStack[0];\n  if (last) {\n    var p = last.dialog.parentNode || document.body;\n    p.appendChild(this.overlay);\n  } else if (this.overlay.parentNode) {\n    this.overlay.parentNode.removeChild(this.overlay);\n  }\n};\n\n/**\n * @param {Element} candidate to check if contained or is the top-most modal dialog\n * @return {boolean} whether candidate is contained in top dialog\n */\ndialogPolyfill.DialogManager.prototype.containedByTopDialog_ = function(candidate) {\n  while (candidate = findNearestDialog(candidate)) {\n    for (var i = 0, dpi; dpi = this.pendingDialogStack[i]; ++i) {\n      if (dpi.dialog === candidate) {\n        return i === 0;  // only valid if top-most\n      }\n    }\n    candidate = candidate.parentElement;\n  }\n  return false;\n};\n\ndialogPolyfill.DialogManager.prototype.handleFocus_ = function(event) {\n  var target = event.composedPath ? event.composedPath()[0] : event.target;\n\n  if (this.containedByTopDialog_(target)) { return; }\n\n  if (document.activeElement === document.documentElement) { return; }\n\n  event.preventDefault();\n  event.stopPropagation();\n  safeBlur(/** @type {Element} */ (target));\n\n  if (this.forwardTab_ === undefined) { return; }  // move focus only from a tab key\n\n  var dpi = this.pendingDialogStack[0];\n  var dialog = dpi.dialog;\n  var position = dialog.compareDocumentPosition(target);\n  if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n    if (this.forwardTab_) {\n      // forward\n      dpi.focus_();\n    } else if (target !== document.documentElement) {\n      // backwards if we're not already focused on <html>\n      document.documentElement.focus();\n    }\n  }\n\n  return false;\n};\n\ndialogPolyfill.DialogManager.prototype.handleKey_ = function(event) {\n  this.forwardTab_ = undefined;\n  if (event.keyCode === 27) {\n    event.preventDefault();\n    event.stopPropagation();\n    var cancelEvent = new supportCustomEvent('cancel', {\n      bubbles: false,\n      cancelable: true\n    });\n    var dpi = this.pendingDialogStack[0];\n    if (dpi && safeDispatchEvent(dpi.dialog, cancelEvent)) {\n      dpi.dialog.close();\n    }\n  } else if (event.keyCode === 9) {\n    this.forwardTab_ = !event.shiftKey;\n  }\n};\n\n/**\n * Finds and downgrades any known modal dialogs that are no longer displayed. Dialogs that are\n * removed and immediately readded don't stay modal, they become normal.\n *\n * @param {!Array<!HTMLDialogElement>} removed that have definitely been removed\n */\ndialogPolyfill.DialogManager.prototype.checkDOM_ = function(removed) {\n  // This operates on a clone because it may cause it to change. Each change also calls\n  // updateStacking, which only actually needs to happen once. But who removes many modal dialogs\n  // at a time?!\n  var clone = this.pendingDialogStack.slice();\n  clone.forEach(function(dpi) {\n    if (removed.indexOf(dpi.dialog) !== -1) {\n      dpi.downgradeModal();\n    } else {\n      dpi.maybeHideModal();\n    }\n  });\n};\n\n/**\n * @param {!dialogPolyfillInfo} dpi\n * @return {boolean} whether the dialog was allowed\n */\ndialogPolyfill.DialogManager.prototype.pushDialog = function(dpi) {\n  var allowed = (this.zIndexHigh_ - this.zIndexLow_) / 2 - 1;\n  if (this.pendingDialogStack.length >= allowed) {\n    return false;\n  }\n  if (this.pendingDialogStack.unshift(dpi) === 1) {\n    this.blockDocument();\n  }\n  this.updateStacking();\n  return true;\n};\n\n/**\n * @param {!dialogPolyfillInfo} dpi\n */\ndialogPolyfill.DialogManager.prototype.removeDialog = function(dpi) {\n  var index = this.pendingDialogStack.indexOf(dpi);\n  if (index === -1) { return; }\n\n  this.pendingDialogStack.splice(index, 1);\n  if (this.pendingDialogStack.length === 0) {\n    this.unblockDocument();\n  }\n  this.updateStacking();\n};\n\ndialogPolyfill.dm = new dialogPolyfill.DialogManager();\ndialogPolyfill.formSubmitter = null;\ndialogPolyfill.imagemapUseValue = null;\n\n/**\n * Installs global handlers, such as click listers and native method overrides. These are needed\n * even if a no dialog is registered, as they deal with <form method=\"dialog\">.\n */\nif (window.HTMLDialogElement === undefined) {\n\n  /**\n   * If HTMLFormElement translates method=\"DIALOG\" into 'get', then replace the descriptor with\n   * one that returns the correct value.\n   */\n  var testForm = document.createElement('form');\n  testForm.setAttribute('method', 'dialog');\n  if (testForm.method !== 'dialog') {\n    var methodDescriptor = Object.getOwnPropertyDescriptor(HTMLFormElement.prototype, 'method');\n    if (methodDescriptor) {\n      // nb. Some older iOS and older PhantomJS fail to return the descriptor. Don't do anything\n      // and don't bother to update the element.\n      var realGet = methodDescriptor.get;\n      methodDescriptor.get = function() {\n        if (isFormMethodDialog(this)) {\n          return 'dialog';\n        }\n        return realGet.call(this);\n      };\n      var realSet = methodDescriptor.set;\n      /** @this {HTMLElement} */\n      methodDescriptor.set = function(v) {\n        if (typeof v === 'string' && v.toLowerCase() === 'dialog') {\n          return this.setAttribute('method', v);\n        }\n        return realSet.call(this, v);\n      };\n      Object.defineProperty(HTMLFormElement.prototype, 'method', methodDescriptor);\n    }\n  }\n\n  /**\n   * Global 'click' handler, to capture the <input type=\"submit\"> or <button> element which has\n   * submitted a <form method=\"dialog\">. Needed as Safari and others don't report this inside\n   * document.activeElement.\n   */\n  document.addEventListener('click', function(ev) {\n    dialogPolyfill.formSubmitter = null;\n    dialogPolyfill.imagemapUseValue = null;\n    if (ev.defaultPrevented) { return; }  // e.g. a submit which prevents default submission\n\n    var target = /** @type {Element} */ (ev.target);\n    if ('composedPath' in ev) {\n      var path = ev.composedPath();\n      target = path.shift() || target;\n    }\n    if (!target || !isFormMethodDialog(target.form)) { return; }\n\n    var valid = (target.type === 'submit' && ['button', 'input'].indexOf(target.localName) > -1);\n    if (!valid) {\n      if (!(target.localName === 'input' && target.type === 'image')) { return; }\n      // this is a <input type=\"image\">, which can submit forms\n      dialogPolyfill.imagemapUseValue = ev.offsetX + ',' + ev.offsetY;\n    }\n\n    var dialog = findNearestDialog(target);\n    if (!dialog) { return; }\n\n    dialogPolyfill.formSubmitter = target;\n\n  }, false);\n\n  /**\n   * Global 'submit' handler. This handles submits of `method=\"dialog\"` which are invalid, i.e.,\n   * outside a dialog. They get prevented.\n   */\n  document.addEventListener('submit', function(ev) {\n    var form = ev.target;\n    var dialog = findNearestDialog(form);\n    if (dialog) {\n      return;  // ignore, handle there\n    }\n\n    var submitter = findFormSubmitter(ev);\n    var formmethod = submitter && submitter.getAttribute('formmethod') || form.getAttribute('method');\n    if (formmethod === 'dialog') {\n      ev.preventDefault();\n    }\n  });\n\n  /**\n   * Replace the native HTMLFormElement.submit() method, as it won't fire the\n   * submit event and give us a chance to respond.\n   */\n  var nativeFormSubmit = HTMLFormElement.prototype.submit;\n  var replacementFormSubmit = function () {\n    if (!isFormMethodDialog(this)) {\n      return nativeFormSubmit.call(this);\n    }\n    var dialog = findNearestDialog(this);\n    dialog && dialog.close();\n  };\n  HTMLFormElement.prototype.submit = replacementFormSubmit;\n}\n\nexport default dialogPolyfill;\n","import { DEFAULT_BREAKPOINT } from '../../../constants'\r\nimport { getStyles } from '../getStyles'\r\nimport { default as renderSortDialog } from './renderSortDialog'\r\nimport { default as renderEventDialog } from './renderEventDialog'\r\nimport { default as renderByLocation } from './renderByLocation'\r\nimport { default as renderByTime } from './renderByTime'\r\nimport { default as renderFavorites } from './renderFavorites'\r\nimport { default as renderSearchBar } from './renderSearchBar'\r\nimport { default as renderSearchResults } from './renderSearchResults'\r\nimport { default as renderFloorPlan } from './renderFloorPlan'\r\nimport dialogPolyfill from 'dialog-polyfill'\r\nimport { clearHTML, runMethod } from '../../../utilities'\r\n\r\nconst getRender = ({ state, component }) => async ({ loading } = {}) => {\r\n  const { root, dataset, templateCache } = component\r\n\r\n  // This assures renders happen at the end of the current event loop\r\n  await new Promise(resolve => { setTimeout(() => { resolve() }) })\r\n\r\n  // clear previously rendered content\r\n  clearHTML(root)\r\n\r\n  // get style\r\n  const { css, breakpoint } = dataset\r\n  const style = css || getStyles(breakpoint || DEFAULT_BREAKPOINT)\r\n\r\n  // render loading spinner if necessary\r\n  if (loading) {\r\n    const loadingTemplate = document.createElement('template')\r\n    loadingTemplate.innerHTML = /* html */`\r\n      <style>${style}</style>\r\n      <div class=\"pg-loading\"></div>\r\n    `\r\n    root.appendChild(loadingTemplate.content.cloneNode(true))\r\n    return true // success\r\n  }\r\n\r\n  // determine which render method to use\r\n  const renderMap = {\r\n    location: renderByLocation,\r\n    time: renderByTime,\r\n    allTime: renderByTime,\r\n    now: renderByTime,\r\n    nowOnly: renderByTime,\r\n    favorites: renderFavorites,\r\n    search: renderSearchResults,\r\n  }\r\n  const renderTable = renderMap[state.sortBy]\r\n  const showFloorPlan = state.view === 'floorPlan'\r\n\r\n  // rewrite the template HTML\r\n  const tableTemplate = document.createElement('template')\r\n  tableTemplate.innerHTML = /* html */`\r\n    <style>\r\n      /* typical browser defaults for dialog polyfill */\r\n      dialog + .backdrop { position: fixed; top: 0; right: 0; bottom: 0; left: 0; background: rgba(0, 0, 0, 0.1); }\r\n      ${style}\r\n    </style>\r\n    <section id=\"ProgramGuide\" class=\"${state.maximized ? 'pg-maximized' : ''}\">\r\n      <header class=\"pg-header\">\r\n        ${renderSearchBar(state)}\r\n        <button class=\"pg-maximize-button\" onclick=\"${runMethod('maximize')}\">${state.maximized ? 'Exit Full Screen' : 'Full Screen'}</button>\r\n      </header>\r\n      ${showFloorPlan\r\n        ? renderFloorPlan(state)\r\n        : renderTable(state)\r\n      }\r\n    </section>\r\n    <dialog class=\"pg-dialog pg-dialog--sort\">${renderSortDialog(state, breakpoint)}</dialog>\r\n    <dialog class=\"pg-dialog pg-dialog--event\">${renderEventDialog(state)}</dialog>\r\n  `\r\n  root.appendChild(tableTemplate.content.cloneNode(true))\r\n\r\n  // register dialogs with the polyfill\r\n  const dialogs = root.querySelectorAll('.pg-dialog')\r\n  for (const dialog of dialogs) dialogPolyfill.registerDialog(dialog)\r\n\r\n  if (state.view === 'guide') {\r\n\r\n    // handle scrolling within the table\r\n    const wrapper = root.querySelector('.pg-table-wrapper')\r\n    const handleScroll = () => {\r\n      const SCROLLED_CLASS = 'pg-table-wrapper--scrolled'\r\n      const needsClass = wrapper.scrollLeft > 0 && !wrapper.classList.contains(SCROLLED_CLASS)\r\n      if (needsClass) wrapper.classList.add(SCROLLED_CLASS)\r\n      if (wrapper.scrollLeft === 0) wrapper.classList.remove(SCROLLED_CLASS)\r\n    }\r\n    wrapper.addEventListener('scroll', handleScroll)\r\n  } else if (state.view === 'floorPlan') {\r\n\r\n    // replace placeholder <img> with the real one stored in memory\r\n    // (this allows the image to load prior to viewing the map, and\r\n    // prevents unnecessary reloading of the image)\r\n    const image = root.querySelector('.pg-floor-plan-image')\r\n    image.replaceWith(templateCache.floorPlanImage)\r\n\r\n    // scroll marker into view if necessary\r\n    const marker = root.querySelector('.pg-floor-plan-marker')\r\n    if (marker) marker.scrollIntoView({ block: 'end' })\r\n  }\r\n\r\n  return true // success\r\n}\r\n\r\nexport {\r\n  renderSortDialog,\r\n  renderEventDialog,\r\n  getRender,\r\n}\r\n","import { addFavorite } from '../../../exports'\r\n\r\nexport default ({ state, setState, component }) => async encodedEvent => {\r\n  const { openEventDialog } = component\r\n  const eventJSON = decodeURIComponent(encodedEvent)\r\n  const event = JSON.parse(eventJSON)\r\n  setState({\r\n    favorites: [...state.favorites, event],\r\n  }, {\r\n    render: false,\r\n  })\r\n  openEventDialog(encodedEvent) // update the event modal\r\n  return await addFavorite(event)\r\n}\r\n","import { removeFavorite } from '../../../exports'\r\n\r\nexport default ({ state, setState, component }) => async encodedEvent => {\r\n  const { openEventDialog } = component\r\n  const eventJSON = decodeURIComponent(encodedEvent)\r\n  const event = JSON.parse(eventJSON)\r\n  const removeIndex = state.favorites.findIndex(({ location: _location, start, name }) => {\r\n    const { location: cLocation, start: cStart, name: cName } = event\r\n    return _location === cLocation && start === cStart && name === cName\r\n  })\r\n  const favorites = [...state.favorites]\r\n  favorites.splice(removeIndex, 1)\r\n  if (state.sortBy === 'favorites') {\r\n    setState({ favorites })\r\n  } else {\r\n    setState({ favorites }, { render: false })\r\n    openEventDialog(encodedEvent) // update the event modal\r\n  }\r\n  return await removeFavorite(event)\r\n}\r\n","export default ({ component }) => event => {\r\n  const { toggleSortDialog, closeEventDialog } = component\r\n  if (event.key === 'Esc' || event.key === 'Escape') {\r\n    event.preventDefault()\r\n    toggleSortDialog(false)\r\n    closeEventDialog()\r\n  }\r\n}\r\n","export default ({ setState, component }) => () => {\r\n  const { root } = component\r\n\r\n  // a little extra insurance to avoid conflicts with other code...\r\n  const hash = location.hash.replace('#', '')\r\n  if (!hash.startsWith('View-Location-')) return\r\n\r\n  // navigate to location view\r\n  const _location = hash.replace('View-Location-', '').replace('-', ' ')\r\n  setState({\r\n    activeLocation: _location,\r\n    marker: _location,\r\n    view: 'guide',\r\n    sortBy: 'location',\r\n  })\r\n\r\n  // reset the hash so the navigation can be used more than once in a row\r\n  history.replaceState({}, '', location.href.replace(/#.+/, ''))\r\n\r\n  // scroll location into view if necessary\r\n  setTimeout(() => { // wait for render\r\n    const activeLocationEl = root.querySelector('.pg-cell-wrapper--column-header-active-location')\r\n    if (activeLocationEl) activeLocationEl.scrollIntoView()\r\n  })\r\n}\r\n","export default ({ state, setState, component }) => locationName => {\r\n  const { hasFloorPlan } = state\r\n  if (!hasFloorPlan) return\r\n  const { toggleFloorPlanInteractive } = component\r\n  setState({\r\n    marker: locationName,\r\n    view: 'floorPlan',\r\n  })\r\n  toggleFloorPlanInteractive(locationName !== 'none')\r\n}\r\n","export default ({ state, setState, component }) => _bool => {\r\n  const { templateCache } = component\r\n  const bool = _bool ?? !state.floorPlanInteractive\r\n  const floorPlanInteractive = bool\r\n  const { floorPlan } = state\r\n  const { floorPlanImage } = templateCache\r\n  const INTERACTIVE_CLASS = 'pg-floor-plan-image--interactive'\r\n  const addOrRemove = floorPlanInteractive ? 'add' : 'remove'\r\n  floorPlanImage.classList[addOrRemove](INTERACTIVE_CLASS)\r\n  setState({ floorPlanInteractive })\r\n}\r\n","export default ({ state, component }) => ({ target }) => {\r\n  const { root } = component\r\n\r\n  // do nothing if viewing by \"now only\", because there's nothing to collapse\r\n  if (state.sortBy === 'nowOnly') return\r\n\r\n  // do nothing if the table hasn't scrolled\r\n  const wrapper = root.querySelector('.pg-table-wrapper')\r\n  if (!wrapper.classList.contains('pg-table-wrapper--scrolled')) return\r\n\r\n  // toggle the collapsed classes\r\n  const allHeaders = root.querySelectorAll('.pg-cell-wrapper--row-header')\r\n  const COLLAPSED_CLASS = 'pg-cell-wrapper--row-header-collapsed'\r\n  const addOrRemove = target.classList.contains(COLLAPSED_CLASS) ? 'remove' : 'add'\r\n  for (const header of allHeaders) header.classList[addOrRemove](COLLAPSED_CLASS)\r\n\r\n  // also collapse the corner\r\n  const corner = root.querySelector('.pg-cell-wrapper--corner')\r\n  corner.classList[addOrRemove]('pg-cell-wrapper--corner-collapsed')\r\n}\r\n","import { clearHTML, parseHTML } from '../../../utilities'\r\nimport { renderSortDialog } from '../render'\r\n\r\nexport default ({ state, component }) => _bool => {\r\n  const { root, dataset } = component\r\n  const bool = _bool === 'true' ? true : !!_bool\r\n  const dialog = root.querySelector('.pg-dialog--sort')\r\n  const dialogContent = parseHTML(renderSortDialog(state, dataset.breakpoint))\r\n  clearHTML(dialog)\r\n  dialog.appendChild(dialogContent)\r\n  if (bool) dialog.showModal()\r\n  else if (dialog.open) dialog.close()\r\n}\r\n","import { clearHTML, parseHTML } from '../../../utilities'\r\nimport { getActiveEvent } from '../componentUtils'\r\nimport { renderEventDialog } from '../render'\r\n\r\nexport default ({ setState, component }) => encodedEvent => {\r\n  const { root } = component\r\n\r\n  // set event data\r\n  const eventJSON = decodeURIComponent(encodedEvent)\r\n  const event = JSON.parse(eventJSON)\r\n  const newState = setState({ activeEvent: getActiveEvent(event) }, { render: false })\r\n\r\n  // show the dialog\r\n  const dialog = root.querySelector('.pg-dialog--event')\r\n  const dialogContent = parseHTML(renderEventDialog(newState))\r\n  clearHTML(dialog)\r\n  dialog.appendChild(dialogContent)\r\n  if (!dialog.open) dialog.showModal()\r\n}\r\n","export default ({ component }) => () => {\r\n  const { root } = component\r\n  const dialog = root.querySelector('.pg-dialog--event')\r\n  dialog.close()\r\n}\r\n","export default ({ setState, component }) => _location => {\r\n  const { toggleSortDialog } = component\r\n  toggleSortDialog(false) // close upon selection\r\n  setState({\r\n    view: 'guide',\r\n    sortBy: 'location',\r\n    activeLocation: _location,\r\n  })\r\n}\r\n","export default ({ state, setState }) => event => {\r\n  const activeDay = event.target.value\r\n  const timeString = state.activeTime.toLocaleTimeString()\r\n  setState({\r\n    activeDay,\r\n\r\n    // also reset the active time to match the selected day\r\n    activeTime: new Date(`${activeDay} ${timeString}`),\r\n  }, {\r\n    render: false,\r\n  })\r\n}\r\n","import { DEFAULT_TIMES } from '../../../constants'\r\n\r\nexport default ({ state, setState }) => ({ target }) => {\r\n\r\n  // validate the time and autocorrect\r\n  if (target.min > target.value) target.value = target.min\r\n  if (target.max < target.value) target.value = target.max\r\n  const { interval } = state.times || DEFAULT_TIMES\r\n  const [hr, mn] = target.value.split(':')\r\n  const roundedMn = Math.round(mn / interval) * interval\r\n  const newMn = String(roundedMn).length === 1 ? `0${roundedMn}` : roundedMn\r\n  target.value = `${hr}:${newMn}`\r\n\r\n  // set the time\r\n  const { activeDay } = state\r\n  const timeString = target.value\r\n  setState({\r\n    activeTime: new Date(`${activeDay} ${timeString}`),\r\n  }, {\r\n    render: false,\r\n  })\r\n}\r\n","export default ({ setState, component }) => sortBy => {\r\n  const { toggleSortDialog } = component\r\n  toggleSortDialog(false) // close upon selection\r\n  setState({\r\n    view: 'guide',\r\n    marker: 'none',\r\n    sortBy,\r\n  })\r\n}\r\n","export default ({ setState }) => ({ target }) => {\r\n  setState({ currentSearch: target.value }, { render: false })\r\n}\r\n","import { search } from '../../../utilities'\r\n\r\nexport default ({ state, setState }) => event => {\r\n  event.preventDefault()\r\n  const { currentSearch, events } = state\r\n\r\n  // filter search results\r\n  const searchResults = events.filter(event => {\r\n    return (\r\n      search(currentSearch, event.name)\r\n      || search(currentSearch, event.location)\r\n      || search(currentSearch, event.host)\r\n      || search(currentSearch, event.category)\r\n      || search(currentSearch, event.description)\r\n    )\r\n  }).sort((prev, next) => {\r\n\r\n    // sort name matches at the top\r\n    const prevName = search(currentSearch, prev.name)\r\n    const nextName = search(currentSearch, next.name)\r\n    return !prevName && nextName ? 1 : (prevName && !nextName ? -1 : 0)\r\n  })\r\n\r\n  setState({\r\n    searchResults,\r\n    sortBy: 'search',\r\n  })\r\n}\r\n","export default ({ state, component }) => (event, message) => {\r\n  const { floorPlanInteractive } = state\r\n  if (!floorPlanInteractive) return // skip if floor plan is not in original size mode\r\n  const { root } = component\r\n  const { clientY } = event\r\n  const messageEl = root.querySelector('.pg-floor-plan-message')\r\n  const ACTIVE_CLASS = 'pg-floor-plan-message--active'\r\n  messageEl.style.top = `${clientY}px`\r\n  messageEl.classList.add(ACTIVE_CLASS)\r\n  messageEl.textContent = message\r\n\r\n  // show message for 3 seconds\r\n  setTimeout(() => {\r\n    messageEl.classList.remove(ACTIVE_CLASS)\r\n    setTimeout(() => { messageEl.textContent = '' }, 600) // allow animation to finish first\r\n  }, 3000)\r\n}\r\n","export default ({ state, setState }) => () => {\r\n  setState({ maximized: !state.maximized })\r\n}\r\n","import { getLocations, getEvents, getTimes, getFavorites, getFloorPlan } from '../../exports'\r\nimport { getDateInfo } from '../../utilities'\r\nimport { DEFAULT_EVENT, DEFAULT_TIMES } from '../../constants'\r\nimport { getActiveEvent } from './componentUtils'\r\nimport { getRender } from './render'\r\nimport {\r\n  getAddFavorite,\r\n  getHandleEsc,\r\n  getHandleHashChange,\r\n  getRemoveFavorite,\r\n  getShowFloorPlan,\r\n  getOpenEventDialog,\r\n  getToggleFloorPlanInteractive,\r\n  getToggleSortDialog,\r\n  getCloseEventDialog,\r\n  getSelectActiveLocation,\r\n  getSelectActiveDay,\r\n  getSelectActiveTime,\r\n  getSelectSortBy,\r\n  getChangeSearch,\r\n  getSearch,\r\n  getToggleHeaders,\r\n  getShowFloorPlanMessage,\r\n  getMaximize,\r\n} from './actions'\r\n\r\n// A native web component for the main event schedule\r\nclass ProgramGuideNative extends HTMLElement {\r\n\r\n  // the initial state is never reflected in the UI;\r\n  // a loading spinner is rendered instead.\r\n  #state = {\r\n    locations: [],\r\n    events: [],\r\n    times: DEFAULT_TIMES,\r\n    activeDay: '',\r\n    activeTime: new Date(),\r\n    activeLocation: '',\r\n    activeEvent: getActiveEvent(DEFAULT_EVENT),\r\n    sortBy: 'location', // location | allTime | now | nowOnly | time | favorites\r\n    view: 'guide', // guide | floorPlan\r\n    marker: 'none', // one of the provided location names or 'none'\r\n    favorites: [],\r\n    currentSearch: '',\r\n    searchResults: [],\r\n    hasFloorPlan: false,\r\n    floorPlan: {},\r\n    floorPlanInteractive: false,\r\n    maximized: false,\r\n  }\r\n\r\n  // cache to avoid unnecessary reloading\r\n  templateCache = {\r\n    floorPlanImage: new Image(),\r\n  }\r\n\r\n  constructor() {\r\n    super()\r\n    const component = this\r\n    component.root = component.attachShadow({ mode: 'open' })\r\n\r\n    // assign action methods from other files\r\n    const actionMap = {\r\n      render: getRender,\r\n      handleEsc: getHandleEsc,\r\n      handleHashChange: getHandleHashChange,\r\n      addFavorite: getAddFavorite,\r\n      removeFavorite: getRemoveFavorite,\r\n      showFloorPlan: getShowFloorPlan,\r\n      toggleFloorPlanInteractive: getToggleFloorPlanInteractive,\r\n      toggleHeaders: getToggleHeaders,\r\n      toggleSortDialog: getToggleSortDialog,\r\n      openEventDialog: getOpenEventDialog,\r\n      closeEventDialog: getCloseEventDialog,\r\n      selectActiveLocation: getSelectActiveLocation,\r\n      selectActiveDay: getSelectActiveDay,\r\n      selectActiveTime: getSelectActiveTime,\r\n      selectSortBy: getSelectSortBy,\r\n      changeSearch: getChangeSearch,\r\n      search: getSearch,\r\n      showFloorPlanMessage: getShowFloorPlanMessage,\r\n      maximize: getMaximize,\r\n    }\r\n    for (const actionName in actionMap) {\r\n      const action = actionMap[actionName]\r\n      component[actionName] = component.provideState(action)\r\n    }\r\n\r\n    // render loading spinner\r\n    component.render({ loading: true })\r\n\r\n    // asynchronously fetch data and update internal state\r\n    component.waitForFetch = getLocations().then(async locations => {\r\n\r\n      // the initial results of the async data fetcher\r\n      const programGuideData = {\r\n        events: await getEvents(),\r\n        times: await getTimes(),\r\n        favorites: await getFavorites(),\r\n        floorPlan: await getFloorPlan(),\r\n        locations: locations,\r\n      }\r\n\r\n      // load floor plan image and store it in the cache\r\n      const { floorPlanImage } = component.templateCache\r\n      const { imageSrc, dimensions } = programGuideData.floorPlan\r\n      const { height, width } = dimensions\r\n      floorPlanImage.className = 'pg-floor-plan-image'\r\n      floorPlanImage.src = imageSrc\r\n      floorPlanImage.height = height\r\n      floorPlanImage.width = width\r\n\r\n      // derive the active date and time from the earliest date in the data\r\n      const { days } = programGuideData.times || DEFAULT_TIMES\r\n      const activeDay = Object.keys(days)[0]\r\n      const firstTime = days[activeDay][0].date\r\n      const { date, time } = getDateInfo(firstTime)\r\n\r\n      // update the data and replace the loading spinner with the real element\r\n      component.setState({\r\n        ...programGuideData,\r\n        activeLocation: locations[0],\r\n        activeDay,\r\n        activeTime: new Date(`${date} ${time}`),\r\n        hasFloorPlan: !!imageSrc,\r\n      })\r\n    })\r\n  }\r\n\r\n  connectedCallback() {\r\n    const component = this\r\n    window.addEventListener('keydown', component.handleEsc)\r\n    component.waitForFetch.then(() => {\r\n      window.addEventListener('hashchange', component.handleHashChange)\r\n    })\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    const component = this\r\n    window.removeEventListener('keydown', component.handleEsc)\r\n    window.removeEventListener('hashchange', component.handleHashChange)\r\n  }\r\n\r\n  setState(state, options = { render: true }) {\r\n    const component = this\r\n    component.#state = {\r\n      ...component.#state,\r\n      ...state,\r\n    }\r\n    if (options.render) component.render()\r\n    return { ...component.#state }\r\n  }\r\n\r\n  provideState(getCallback) {\r\n    const component = this\r\n    return (...args) => {\r\n      const state = { ...component.#state }\r\n      const setState = component.setState.bind(component)\r\n      const callback = getCallback({ state, setState, component })\r\n      return callback(...args)\r\n    }\r\n  }\r\n}\r\n\r\nexport default ProgramGuideNative\r\n"],"names":["DEFAULT_FLOOR_PLAN","title","imageSrc","dimensions","height","width","clickableAreas","DEFAULT_GUIDE","locations","events","floorPlan","rollOverTime","FAVORITES_KEY","DEFAULT_ADD_FAVORITE","event","favoriteEvents","JSON","parse","localStorage","getItem","push","eventsJSON","stringify","setItem","DEFAULT_REMOVE_FAVORITE","removeIndex","findIndex","location","_location","start","name","cLocation","cStart","cName","splice","DEFAULT_GET_FAVORITES","NOW","Date","now","HOUR","DEFAULT_EVENT","end","host","category","description","DEFAULT_TIMES","days","interval","DEFAULT_BREAKPOINT","getType","val","constructor","toLowerCase","checkType","type","validString","validArray","every","t","some","isObject","obj","checkFilterType","filter","after","before","search","clearHTML","element","i","childNodes","length","removeChild","lastChild","parseHTML","htmlStr","range","document","createRange","selectNode","body","createContextualFragment","mapString","arr","callback","map","join","roundMinutes","_date","nearestMinute","date","roundedMinutes","Math","round","getMinutes","setMinutes","WholeNumber","num","Number","toFixed","getDay","idx","short","shortDays","getDateInfo","time","toLocaleTimeString","timeStyle","day","toLocaleDateString","runMethod","args","mapType","value","object","encodeURIComponent","string","default","String","getEventId","_start","snip","s","replace","_input","_text","formatForSimilarMatch","str","normalize","input","text","split","trim","slice","getMarkerCoords","marker","clickableArea","find","allX","coords","_","allY","minX","min","minY","maxX","max","maxY","x","y","getLastTimeInThreshold","currentDate","allDates","threshold","lastInCurrentDay","getDate","nextDate","setDate","setTime","getTime","allTimesNextDay","lastInNextDay","state","_hasFetched","hasFetched","bool","fetchQueue","forEach","resolve","waitForFetch","Promise","guide","addFavorite","removeFavorite","getFavorites","reduce","has","add","Set","times","allTimes","sort","earliestTime","latestTime","minutes","getTimeObject","timeString","getFullDay","prevTime","currentDay","lastTimeInDay","currentTime","intervalInMs","getState","globalThis","__thunderEvents__sharedState","INITIAL_STATE","getEvents","_filters","include","_include","exclude","_exclude","filters","Infinity","contains","getLocations","getTimes","getFloorPlan","favorites","getActiveEvent","getCellData","spanState","_event","e","hasStarted","eventName","cellType","getStart","duration","span","blank","getStyles","breakpoint","dialogPolyfill","loading","theme","table","icons","dialog","mobile","renderSortDialog","hasFloorPlan","activeDay","activeTime","_activeTime","beyondThreshold","window","matchMedia","matches","getTimeValue","hour12","currentTimes","minTime","maxTime","step","Object","keys","renderEventDialog","activeEvent","sortBy","existingFavorite","aLocation","aStart","aName","favoriteMethod","favoriteText","paragraph","toISOString","renderByLocation","activeLocation","getActiveClass","className","getMarkerClass","renderByTime","_times","nowDay","nowDate","nowTime","filterMap","nowOnly","allTime","filteredTimes","timeMap","renderFavorites","startDate","endDate","startTime","endTime","renderSearchBar","currentSearch","renderSearchResults","searchResults","renderFloorPlan","floorPlanInteractive","showMap","markerCoords","zoomButtonText","shape","href","alt","fullHref","startsWith","isExternalLink","URL","hostname","getRender","component","root","dataset","templateCache","setTimeout","css","style","loadingTemplate","createElement","innerHTML","appendChild","content","cloneNode","renderMap","renderTable","showFloorPlan","view","tableTemplate","maximized","dialogs","querySelectorAll","registerDialog","wrapper","querySelector","handleScroll","SCROLLED_CLASS","needsClass","scrollLeft","classList","remove","addEventListener","image","replaceWith","floorPlanImage","scrollIntoView","block","setState","encodedEvent","openEventDialog","eventJSON","decodeURIComponent","render","toggleSortDialog","closeEventDialog","key","preventDefault","hash","history","replaceState","activeLocationEl","locationName","toggleFloorPlanInteractive","_bool","INTERACTIVE_CLASS","addOrRemove","target","allHeaders","COLLAPSED_CLASS","header","corner","dialogContent","showModal","open","close","newState","hr","mn","roundedMn","newMn","prev","next","prevName","nextName","message","clientY","messageEl","ACTIVE_CLASS","top","textContent","ProgramGuideNative","HTMLElement","Image","attachShadow","mode","actionMap","handleEsc","getHandleEsc","handleHashChange","getHandleHashChange","getAddFavorite","getRemoveFavorite","getShowFloorPlan","getToggleFloorPlanInteractive","toggleHeaders","getToggleHeaders","getToggleSortDialog","getOpenEventDialog","getCloseEventDialog","selectActiveLocation","getSelectActiveLocation","selectActiveDay","getSelectActiveDay","selectActiveTime","getSelectActiveTime","selectSortBy","getSelectSortBy","changeSearch","getChangeSearch","getSearch","showFloorPlanMessage","getShowFloorPlanMessage","maximize","getMaximize","actionName","action","provideState","then","programGuideData","src","firstTime","connectedCallback","disconnectedCallback","removeEventListener","options","getCallback","bind"],"mappings":"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AtCA,CCAA,aAAe;AAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA5JA,CCAA,YAAe;AAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CArDA,CCAA,cAAe;AAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAvCA,CCAA,aAAe;AAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CArEA,CCAA,aAAe;AAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CApDA,CCAA,YAAe;AAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA1IA,CCAA,YAAe;AAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CArGA,CCAA,gBAAe;AAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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"}